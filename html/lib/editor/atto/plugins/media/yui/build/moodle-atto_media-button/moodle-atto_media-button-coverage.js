
var __cov_rE9vzJ60_FO4xOugmxKTkg = (Function('return this'))();
if (!__cov_rE9vzJ60_FO4xOugmxKTkg.__coverage__) { __cov_rE9vzJ60_FO4xOugmxKTkg.__coverage__ = {}; }
__cov_rE9vzJ60_FO4xOugmxKTkg = __cov_rE9vzJ60_FO4xOugmxKTkg.__coverage__;
if (!(__cov_rE9vzJ60_FO4xOugmxKTkg['build/moodle-atto_media-button/moodle-atto_media-button.js'])) {
   __cov_rE9vzJ60_FO4xOugmxKTkg['build/moodle-atto_media-button/moodle-atto_media-button.js'] = {"path":"build/moodle-atto_media-button/moodle-atto_media-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"(anonymous_2)","line":594,"loc":{"start":{"line":594,"column":17},"end":{"line":594,"column":28}}},"3":{"name":"(anonymous_3)","line":616,"loc":{"start":{"line":616,"column":17},"end":{"line":616,"column":33}}},"4":{"name":"(anonymous_4)","line":634,"loc":{"start":{"line":634,"column":18},"end":{"line":634,"column":30}}},"5":{"name":"(anonymous_5)","line":649,"loc":{"start":{"line":649,"column":22},"end":{"line":649,"column":33}}},"6":{"name":"smashPartials","line":655,"loc":{"start":{"line":655,"column":13},"end":{"line":655,"column":48}}},"7":{"name":"(anonymous_7)","line":656,"loc":{"start":{"line":656,"column":28},"end":{"line":656,"column":51}}},"8":{"name":"(anonymous_8)","line":667,"loc":{"start":{"line":667,"column":57},"end":{"line":667,"column":88}}},"9":{"name":"(anonymous_9)","line":704,"loc":{"start":{"line":704,"column":25},"end":{"line":704,"column":45}}},"10":{"name":"(anonymous_10)","line":723,"loc":{"start":{"line":723,"column":19},"end":{"line":723,"column":48}}},"11":{"name":"(anonymous_11)","line":725,"loc":{"start":{"line":725,"column":34},"end":{"line":725,"column":46}}},"12":{"name":"(anonymous_12)","line":731,"loc":{"start":{"line":731,"column":34},"end":{"line":731,"column":46}}},"13":{"name":"(anonymous_13)","line":737,"loc":{"start":{"line":737,"column":34},"end":{"line":737,"column":46}}},"14":{"name":"(anonymous_14)","line":740,"loc":{"start":{"line":740,"column":30},"end":{"line":740,"column":43}}},"15":{"name":"(anonymous_15)","line":744,"loc":{"start":{"line":744,"column":95},"end":{"line":744,"column":112}}},"16":{"name":"(anonymous_16)","line":753,"loc":{"start":{"line":753,"column":34},"end":{"line":753,"column":46}}},"17":{"name":"(anonymous_17)","line":773,"loc":{"start":{"line":773,"column":45},"end":{"line":773,"column":60}}},"18":{"name":"(anonymous_18)","line":777,"loc":{"start":{"line":777,"column":43},"end":{"line":777,"column":55}}},"19":{"name":"(anonymous_19)","line":803,"loc":{"start":{"line":803,"column":28},"end":{"line":803,"column":58}}},"20":{"name":"(anonymous_20)","line":808,"loc":{"start":{"line":808,"column":35},"end":{"line":808,"column":63}}},"21":{"name":"(anonymous_21)","line":820,"loc":{"start":{"line":820,"column":50},"end":{"line":820,"column":67}}},"22":{"name":"(anonymous_22)","line":821,"loc":{"start":{"line":821,"column":98},"end":{"line":821,"column":121}}},"23":{"name":"(anonymous_23)","line":827,"loc":{"start":{"line":827,"column":41},"end":{"line":827,"column":62}}},"24":{"name":"(anonymous_24)","line":832,"loc":{"start":{"line":832,"column":45},"end":{"line":832,"column":61}}},"25":{"name":"(anonymous_25)","line":835,"loc":{"start":{"line":835,"column":20},"end":{"line":835,"column":43}}},"26":{"name":"(anonymous_26)","line":881,"loc":{"start":{"line":881,"column":26},"end":{"line":881,"column":43}}},"27":{"name":"(anonymous_27)","line":882,"loc":{"start":{"line":882,"column":23},"end":{"line":882,"column":44}}},"28":{"name":"(anonymous_28)","line":896,"loc":{"start":{"line":896,"column":33},"end":{"line":896,"column":49}}},"29":{"name":"(anonymous_29)","line":932,"loc":{"start":{"line":932,"column":24},"end":{"line":932,"column":52}}},"30":{"name":"(anonymous_30)","line":951,"loc":{"start":{"line":951,"column":30},"end":{"line":951,"column":58}}},"31":{"name":"(anonymous_31)","line":980,"loc":{"start":{"line":980,"column":19},"end":{"line":980,"column":77}}},"32":{"name":"(anonymous_32)","line":988,"loc":{"start":{"line":988,"column":55},"end":{"line":988,"column":67}}},"33":{"name":"(anonymous_33)","line":1011,"loc":{"start":{"line":1011,"column":28},"end":{"line":1011,"column":54}}},"34":{"name":"(anonymous_34)","line":1012,"loc":{"start":{"line":1012,"column":15},"end":{"line":1012,"column":32}}},"35":{"name":"(anonymous_35)","line":1024,"loc":{"start":{"line":1024,"column":69},"end":{"line":1024,"column":91}}},"36":{"name":"(anonymous_36)","line":1044,"loc":{"start":{"line":1044,"column":31},"end":{"line":1044,"column":49}}},"37":{"name":"(anonymous_37)","line":1055,"loc":{"start":{"line":1055,"column":30},"end":{"line":1055,"column":48}}},"38":{"name":"(anonymous_38)","line":1067,"loc":{"start":{"line":1067,"column":19},"end":{"line":1067,"column":34}}},"39":{"name":"(anonymous_39)","line":1082,"loc":{"start":{"line":1082,"column":23},"end":{"line":1082,"column":37}}},"40":{"name":"(anonymous_40)","line":1099,"loc":{"start":{"line":1099,"column":24},"end":{"line":1099,"column":38}}},"41":{"name":"(anonymous_41)","line":1118,"loc":{"start":{"line":1118,"column":24},"end":{"line":1118,"column":38}}},"42":{"name":"(anonymous_42)","line":1132,"loc":{"start":{"line":1132,"column":29},"end":{"line":1132,"column":43}}},"43":{"name":"(anonymous_43)","line":1135,"loc":{"start":{"line":1135,"column":38},"end":{"line":1135,"column":54}}},"44":{"name":"(anonymous_44)","line":1147,"loc":{"start":{"line":1147,"column":101},"end":{"line":1147,"column":118}}},"45":{"name":"(anonymous_45)","line":1149,"loc":{"start":{"line":1149,"column":19},"end":{"line":1149,"column":36}}},"46":{"name":"(anonymous_46)","line":1153,"loc":{"start":{"line":1153,"column":34},"end":{"line":1153,"column":50}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1171,"column":87}},"2":{"start":{"line":36,"column":0},"end":{"line":590,"column":6}},"3":{"start":{"line":592,"column":0},"end":{"line":1168,"column":3}},"4":{"start":{"line":595,"column":8},"end":{"line":605,"column":9}},"5":{"start":{"line":596,"column":12},"end":{"line":596,"column":83}},"6":{"start":{"line":597,"column":12},"end":{"line":597,"column":76}},"7":{"start":{"line":599,"column":12},"end":{"line":604,"column":15}},"8":{"start":{"line":617,"column":8},"end":{"line":624,"column":18}},"9":{"start":{"line":635,"column":8},"end":{"line":635,"column":30}},"10":{"start":{"line":637,"column":8},"end":{"line":637,"column":70}},"11":{"start":{"line":638,"column":8},"end":{"line":640,"column":9}},"12":{"start":{"line":639,"column":12},"end":{"line":639,"column":53}},"13":{"start":{"line":650,"column":8},"end":{"line":652,"column":9}},"14":{"start":{"line":651,"column":12},"end":{"line":651,"column":19}},"15":{"start":{"line":654,"column":8},"end":{"line":682,"column":9}},"16":{"start":{"line":655,"column":12},"end":{"line":665,"column":30}},"17":{"start":{"line":656,"column":16},"end":{"line":664,"column":19}},"18":{"start":{"line":657,"column":20},"end":{"line":657,"column":38}},"19":{"start":{"line":658,"column":20},"end":{"line":662,"column":21}},"20":{"start":{"line":659,"column":24},"end":{"line":659,"column":91}},"21":{"start":{"line":661,"column":24},"end":{"line":661,"column":52}},"22":{"start":{"line":663,"column":20},"end":{"line":663,"column":32}},"23":{"start":{"line":667,"column":12},"end":{"line":681,"column":15}},"24":{"start":{"line":668,"column":16},"end":{"line":670,"column":17}},"25":{"start":{"line":669,"column":20},"end":{"line":669,"column":30}},"26":{"start":{"line":672,"column":16},"end":{"line":672,"column":65}},"27":{"start":{"line":673,"column":16},"end":{"line":673,"column":94}},"28":{"start":{"line":674,"column":16},"end":{"line":674,"column":67}},"29":{"start":{"line":675,"column":16},"end":{"line":675,"column":39}},"30":{"start":{"line":677,"column":16},"end":{"line":679,"column":17}},"31":{"start":{"line":678,"column":20},"end":{"line":678,"column":30}},"32":{"start":{"line":680,"column":16},"end":{"line":680,"column":91}},"33":{"start":{"line":684,"column":8},"end":{"line":689,"column":11}},"34":{"start":{"line":692,"column":8},"end":{"line":692,"column":102}},"35":{"start":{"line":693,"column":8},"end":{"line":693,"column":94}},"36":{"start":{"line":705,"column":8},"end":{"line":707,"column":10}},"37":{"start":{"line":709,"column":8},"end":{"line":709,"column":87}},"38":{"start":{"line":710,"column":8},"end":{"line":710,"column":82}},"39":{"start":{"line":711,"column":8},"end":{"line":711,"column":101}},"40":{"start":{"line":725,"column":8},"end":{"line":728,"column":60}},"41":{"start":{"line":726,"column":12},"end":{"line":726,"column":31}},"42":{"start":{"line":727,"column":12},"end":{"line":727,"column":59}},"43":{"start":{"line":731,"column":8},"end":{"line":734,"column":53}},"44":{"start":{"line":732,"column":12},"end":{"line":732,"column":31}},"45":{"start":{"line":733,"column":12},"end":{"line":733,"column":53}},"46":{"start":{"line":737,"column":8},"end":{"line":750,"column":49}},"47":{"start":{"line":738,"column":12},"end":{"line":738,"column":42}},"48":{"start":{"line":739,"column":12},"end":{"line":749,"column":13}},"49":{"start":{"line":740,"column":16},"end":{"line":742,"column":29}},"50":{"start":{"line":741,"column":20},"end":{"line":741,"column":83}},"51":{"start":{"line":744,"column":16},"end":{"line":748,"column":19}},"52":{"start":{"line":745,"column":20},"end":{"line":747,"column":21}},"53":{"start":{"line":746,"column":24},"end":{"line":746,"column":53}},"54":{"start":{"line":753,"column":8},"end":{"line":760,"column":38}},"55":{"start":{"line":754,"column":12},"end":{"line":754,"column":42}},"56":{"start":{"line":755,"column":12},"end":{"line":757,"column":24}},"57":{"start":{"line":758,"column":12},"end":{"line":758,"column":31}},"58":{"start":{"line":759,"column":12},"end":{"line":759,"column":104}},"59":{"start":{"line":773,"column":8},"end":{"line":775,"column":11}},"60":{"start":{"line":774,"column":12},"end":{"line":774,"column":86}},"61":{"start":{"line":777,"column":8},"end":{"line":789,"column":17}},"62":{"start":{"line":778,"column":12},"end":{"line":778,"column":31}},"63":{"start":{"line":779,"column":12},"end":{"line":780,"column":40}},"64":{"start":{"line":781,"column":12},"end":{"line":783,"column":22}},"65":{"start":{"line":784,"column":12},"end":{"line":788,"column":13}},"66":{"start":{"line":785,"column":16},"end":{"line":785,"column":45}},"67":{"start":{"line":786,"column":16},"end":{"line":786,"column":58}},"68":{"start":{"line":787,"column":16},"end":{"line":787,"column":35}},"69":{"start":{"line":791,"column":8},"end":{"line":791,"column":23}},"70":{"start":{"line":804,"column":8},"end":{"line":806,"column":9}},"71":{"start":{"line":805,"column":12},"end":{"line":805,"column":27}},"72":{"start":{"line":808,"column":8},"end":{"line":813,"column":10}},"73":{"start":{"line":809,"column":12},"end":{"line":809,"column":103}},"74":{"start":{"line":810,"column":12},"end":{"line":810,"column":83}},"75":{"start":{"line":811,"column":12},"end":{"line":811,"column":82}},"76":{"start":{"line":812,"column":12},"end":{"line":812,"column":94}},"77":{"start":{"line":815,"column":8},"end":{"line":816,"column":49}},"78":{"start":{"line":819,"column":8},"end":{"line":819,"column":108}},"79":{"start":{"line":820,"column":8},"end":{"line":824,"column":17}},"80":{"start":{"line":821,"column":12},"end":{"line":823,"column":15}},"81":{"start":{"line":822,"column":16},"end":{"line":822,"column":75}},"82":{"start":{"line":827,"column":8},"end":{"line":839,"column":17}},"83":{"start":{"line":828,"column":12},"end":{"line":828,"column":110}},"84":{"start":{"line":829,"column":12},"end":{"line":829,"column":81}},"85":{"start":{"line":831,"column":12},"end":{"line":831,"column":98}},"86":{"start":{"line":832,"column":12},"end":{"line":838,"column":21}},"87":{"start":{"line":833,"column":16},"end":{"line":837,"column":23}},"88":{"start":{"line":836,"column":24},"end":{"line":836,"column":66}},"89":{"start":{"line":842,"column":8},"end":{"line":842,"column":74}},"90":{"start":{"line":843,"column":8},"end":{"line":843,"column":89}},"91":{"start":{"line":844,"column":8},"end":{"line":844,"column":89}},"92":{"start":{"line":845,"column":8},"end":{"line":845,"column":82}},"93":{"start":{"line":846,"column":8},"end":{"line":846,"column":81}},"94":{"start":{"line":849,"column":8},"end":{"line":849,"column":65}},"95":{"start":{"line":851,"column":8},"end":{"line":859,"column":9}},"96":{"start":{"line":853,"column":12},"end":{"line":853,"column":118}},"97":{"start":{"line":854,"column":12},"end":{"line":854,"column":78}},"98":{"start":{"line":855,"column":12},"end":{"line":855,"column":80}},"99":{"start":{"line":856,"column":12},"end":{"line":856,"column":80}},"100":{"start":{"line":857,"column":12},"end":{"line":857,"column":80}},"101":{"start":{"line":858,"column":12},"end":{"line":858,"column":80}},"102":{"start":{"line":863,"column":8},"end":{"line":863,"column":58}},"103":{"start":{"line":864,"column":8},"end":{"line":864,"column":72}},"104":{"start":{"line":867,"column":8},"end":{"line":867,"column":35}},"105":{"start":{"line":868,"column":8},"end":{"line":868,"column":92}},"106":{"start":{"line":870,"column":8},"end":{"line":870,"column":23}},"107":{"start":{"line":882,"column":8},"end":{"line":886,"column":10}},"108":{"start":{"line":885,"column":12},"end":{"line":885,"column":108}},"109":{"start":{"line":888,"column":8},"end":{"line":894,"column":10}},"110":{"start":{"line":896,"column":8},"end":{"line":903,"column":11}},"111":{"start":{"line":897,"column":12},"end":{"line":902,"column":15}},"112":{"start":{"line":905,"column":8},"end":{"line":920,"column":10}},"113":{"start":{"line":933,"column":8},"end":{"line":933,"column":85}},"114":{"start":{"line":934,"column":8},"end":{"line":937,"column":11}},"115":{"start":{"line":939,"column":8},"end":{"line":939,"column":105}},"116":{"start":{"line":952,"column":8},"end":{"line":952,"column":87}},"117":{"start":{"line":953,"column":8},"end":{"line":959,"column":11}},"118":{"start":{"line":960,"column":8},"end":{"line":960,"column":113}},"119":{"start":{"line":981,"column":8},"end":{"line":983,"column":58}},"120":{"start":{"line":985,"column":8},"end":{"line":985,"column":43}},"121":{"start":{"line":986,"column":8},"end":{"line":986,"column":124}},"122":{"start":{"line":988,"column":8},"end":{"line":991,"column":11}},"123":{"start":{"line":989,"column":12},"end":{"line":989,"column":31}},"124":{"start":{"line":990,"column":12},"end":{"line":990,"column":42}},"125":{"start":{"line":993,"column":8},"end":{"line":993,"column":55}},"126":{"start":{"line":994,"column":8},"end":{"line":994,"column":55}},"127":{"start":{"line":995,"column":8},"end":{"line":995,"column":40}},"128":{"start":{"line":997,"column":8},"end":{"line":999,"column":9}},"129":{"start":{"line":998,"column":12},"end":{"line":998,"column":46}},"130":{"start":{"line":1012,"column":8},"end":{"line":1034,"column":10}},"131":{"start":{"line":1013,"column":12},"end":{"line":1033,"column":13}},"132":{"start":{"line":1014,"column":16},"end":{"line":1014,"column":60}},"133":{"start":{"line":1015,"column":16},"end":{"line":1015,"column":101}},"134":{"start":{"line":1018,"column":16},"end":{"line":1020,"column":17}},"135":{"start":{"line":1019,"column":20},"end":{"line":1019,"column":80}},"136":{"start":{"line":1022,"column":16},"end":{"line":1032,"column":17}},"137":{"start":{"line":1023,"column":20},"end":{"line":1023,"column":92}},"138":{"start":{"line":1024,"column":20},"end":{"line":1026,"column":30}},"139":{"start":{"line":1025,"column":24},"end":{"line":1025,"column":73}},"140":{"start":{"line":1027,"column":20},"end":{"line":1031,"column":21}},"141":{"start":{"line":1028,"column":24},"end":{"line":1029,"column":83}},"142":{"start":{"line":1030,"column":24},"end":{"line":1030,"column":117}},"143":{"start":{"line":1045,"column":8},"end":{"line":1045,"column":56}},"144":{"start":{"line":1056,"column":8},"end":{"line":1056,"column":55}},"145":{"start":{"line":1068,"column":8},"end":{"line":1068,"column":106}},"146":{"start":{"line":1069,"column":8},"end":{"line":1069,"column":81}},"147":{"start":{"line":1071,"column":8},"end":{"line":1071,"column":102}},"148":{"start":{"line":1083,"column":8},"end":{"line":1086,"column":10}},"149":{"start":{"line":1088,"column":8},"end":{"line":1088,"column":91}},"150":{"start":{"line":1100,"column":8},"end":{"line":1100,"column":56}},"151":{"start":{"line":1101,"column":8},"end":{"line":1101,"column":77}},"152":{"start":{"line":1102,"column":8},"end":{"line":1102,"column":79}},"153":{"start":{"line":1103,"column":8},"end":{"line":1103,"column":108}},"154":{"start":{"line":1104,"column":8},"end":{"line":1104,"column":79}},"155":{"start":{"line":1105,"column":8},"end":{"line":1105,"column":79}},"156":{"start":{"line":1106,"column":8},"end":{"line":1106,"column":79}},"157":{"start":{"line":1107,"column":8},"end":{"line":1107,"column":103}},"158":{"start":{"line":1119,"column":8},"end":{"line":1119,"column":56}},"159":{"start":{"line":1121,"column":8},"end":{"line":1121,"column":103}},"160":{"start":{"line":1133,"column":8},"end":{"line":1133,"column":24}},"161":{"start":{"line":1135,"column":8},"end":{"line":1144,"column":17}},"162":{"start":{"line":1136,"column":12},"end":{"line":1143,"column":15}},"163":{"start":{"line":1146,"column":8},"end":{"line":1161,"column":10}},"164":{"start":{"line":1148,"column":16},"end":{"line":1148,"column":32}},"165":{"start":{"line":1150,"column":16},"end":{"line":1150,"column":42}},"166":{"start":{"line":1154,"column":16},"end":{"line":1154,"column":37}}},"branchMap":{"1":{"line":595,"type":"if","locations":[{"start":{"line":595,"column":8},"end":{"line":595,"column":8}},{"start":{"line":595,"column":8},"end":{"line":595,"column":8}}]},"2":{"line":638,"type":"if","locations":[{"start":{"line":638,"column":8},"end":{"line":638,"column":8}},{"start":{"line":638,"column":8},"end":{"line":638,"column":8}}]},"3":{"line":650,"type":"if","locations":[{"start":{"line":650,"column":8},"end":{"line":650,"column":8}},{"start":{"line":650,"column":8},"end":{"line":650,"column":8}}]},"4":{"line":654,"type":"if","locations":[{"start":{"line":654,"column":8},"end":{"line":654,"column":8}},{"start":{"line":654,"column":8},"end":{"line":654,"column":8}}]},"5":{"line":658,"type":"if","locations":[{"start":{"line":658,"column":20},"end":{"line":658,"column":20}},{"start":{"line":658,"column":20},"end":{"line":658,"column":20}}]},"6":{"line":668,"type":"if","locations":[{"start":{"line":668,"column":16},"end":{"line":668,"column":16}},{"start":{"line":668,"column":16},"end":{"line":668,"column":16}}]},"7":{"line":673,"type":"cond-expr","locations":[{"start":{"line":673,"column":59},"end":{"line":673,"column":88}},{"start":{"line":673,"column":91},"end":{"line":673,"column":93}}]},"8":{"line":677,"type":"if","locations":[{"start":{"line":677,"column":16},"end":{"line":677,"column":16}},{"start":{"line":677,"column":16},"end":{"line":677,"column":16}}]},"9":{"line":710,"type":"cond-expr","locations":[{"start":{"line":710,"column":40},"end":{"line":710,"column":73}},{"start":{"line":710,"column":76},"end":{"line":710,"column":81}}]},"10":{"line":739,"type":"if","locations":[{"start":{"line":739,"column":12},"end":{"line":739,"column":12}},{"start":{"line":739,"column":12},"end":{"line":739,"column":12}}]},"11":{"line":745,"type":"if","locations":[{"start":{"line":745,"column":20},"end":{"line":745,"column":20}},{"start":{"line":745,"column":20},"end":{"line":745,"column":20}}]},"12":{"line":745,"type":"binary-expr","locations":[{"start":{"line":745,"column":24},"end":{"line":745,"column":42}},{"start":{"line":745,"column":46},"end":{"line":745,"column":82}}]},"13":{"line":755,"type":"binary-expr","locations":[{"start":{"line":755,"column":26},"end":{"line":755,"column":67}},{"start":{"line":755,"column":71},"end":{"line":755,"column":78}},{"start":{"line":756,"column":17},"end":{"line":756,"column":57}},{"start":{"line":756,"column":61},"end":{"line":756,"column":71}},{"start":{"line":757,"column":16},"end":{"line":757,"column":23}}]},"14":{"line":784,"type":"if","locations":[{"start":{"line":784,"column":12},"end":{"line":784,"column":12}},{"start":{"line":784,"column":12},"end":{"line":784,"column":12}}]},"15":{"line":804,"type":"if","locations":[{"start":{"line":804,"column":8},"end":{"line":804,"column":8}},{"start":{"line":804,"column":8},"end":{"line":804,"column":8}}]},"16":{"line":828,"type":"cond-expr","locations":[{"start":{"line":828,"column":43},"end":{"line":828,"column":48}},{"start":{"line":828,"column":51},"end":{"line":828,"column":109}}]},"17":{"line":851,"type":"if","locations":[{"start":{"line":851,"column":8},"end":{"line":851,"column":8}},{"start":{"line":851,"column":8},"end":{"line":851,"column":8}}]},"18":{"line":885,"type":"binary-expr","locations":[{"start":{"line":885,"column":20},"end":{"line":885,"column":43}},{"start":{"line":885,"column":48},"end":{"line":885,"column":71}},{"start":{"line":885,"column":75},"end":{"line":885,"column":105}}]},"19":{"line":906,"type":"cond-expr","locations":[{"start":{"line":906,"column":41},"end":{"line":906,"column":58}},{"start":{"line":906,"column":61},"end":{"line":906,"column":78}}]},"20":{"line":997,"type":"if","locations":[{"start":{"line":997,"column":8},"end":{"line":997,"column":8}},{"start":{"line":997,"column":8},"end":{"line":997,"column":8}}]},"21":{"line":1013,"type":"if","locations":[{"start":{"line":1013,"column":12},"end":{"line":1013,"column":12}},{"start":{"line":1013,"column":12},"end":{"line":1013,"column":12}}]},"22":{"line":1018,"type":"if","locations":[{"start":{"line":1018,"column":16},"end":{"line":1018,"column":16}},{"start":{"line":1018,"column":16},"end":{"line":1018,"column":16}}]},"23":{"line":1022,"type":"if","locations":[{"start":{"line":1022,"column":16},"end":{"line":1022,"column":16}},{"start":{"line":1022,"column":16},"end":{"line":1022,"column":16}}]},"24":{"line":1025,"type":"cond-expr","locations":[{"start":{"line":1025,"column":60},"end":{"line":1025,"column":64}},{"start":{"line":1025,"column":67},"end":{"line":1025,"column":72}}]},"25":{"line":1027,"type":"if","locations":[{"start":{"line":1027,"column":20},"end":{"line":1027,"column":20}},{"start":{"line":1027,"column":20},"end":{"line":1027,"column":20}}]},"26":{"line":1085,"type":"binary-expr","locations":[{"start":{"line":1085,"column":18},"end":{"line":1085,"column":60}},{"start":{"line":1085,"column":64},"end":{"line":1085,"column":69}}]},"27":{"line":1088,"type":"cond-expr","locations":[{"start":{"line":1088,"column":29},"end":{"line":1088,"column":85}},{"start":{"line":1088,"column":88},"end":{"line":1088,"column":90}}]},"28":{"line":1101,"type":"binary-expr","locations":[{"start":{"line":1101,"column":24},"end":{"line":1101,"column":67}},{"start":{"line":1101,"column":71},"end":{"line":1101,"column":76}}]},"29":{"line":1102,"type":"binary-expr","locations":[{"start":{"line":1102,"column":25},"end":{"line":1102,"column":69}},{"start":{"line":1102,"column":73},"end":{"line":1102,"column":78}}]},"30":{"line":1103,"type":"binary-expr","locations":[{"start":{"line":1103,"column":25},"end":{"line":1103,"column":98}},{"start":{"line":1103,"column":102},"end":{"line":1103,"column":107}}]},"31":{"line":1104,"type":"binary-expr","locations":[{"start":{"line":1104,"column":25},"end":{"line":1104,"column":69}},{"start":{"line":1104,"column":73},"end":{"line":1104,"column":78}}]},"32":{"line":1105,"type":"binary-expr","locations":[{"start":{"line":1105,"column":25},"end":{"line":1105,"column":69}},{"start":{"line":1105,"column":73},"end":{"line":1105,"column":78}}]},"33":{"line":1106,"type":"binary-expr","locations":[{"start":{"line":1106,"column":28},"end":{"line":1106,"column":69}},{"start":{"line":1106,"column":73},"end":{"line":1106,"column":78}}]},"34":{"line":1107,"type":"cond-expr","locations":[{"start":{"line":1107,"column":40},"end":{"line":1107,"column":97}},{"start":{"line":1107,"column":100},"end":{"line":1107,"column":102}}]},"35":{"line":1121,"type":"cond-expr","locations":[{"start":{"line":1121,"column":40},"end":{"line":1121,"column":97}},{"start":{"line":1121,"column":100},"end":{"line":1121,"column":102}}]},"36":{"line":1139,"type":"binary-expr","locations":[{"start":{"line":1139,"column":23},"end":{"line":1139,"column":74}},{"start":{"line":1140,"column":20},"end":{"line":1140,"column":70}}]},"37":{"line":1142,"type":"cond-expr","locations":[{"start":{"line":1142,"column":89},"end":{"line":1142,"column":95}},{"start":{"line":1142,"column":98},"end":{"line":1142,"column":102}}]},"38":{"line":1152,"type":"binary-expr","locations":[{"start":{"line":1152,"column":25},"end":{"line":1152,"column":97}},{"start":{"line":1152,"column":101},"end":{"line":1152,"column":106}}]},"39":{"line":1160,"type":"binary-expr","locations":[{"start":{"line":1160,"column":19},"end":{"line":1160,"column":62}},{"start":{"line":1160,"column":66},"end":{"line":1160,"column":71}}]}},"code":["(function () { YUI.add('moodle-atto_media-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/*"," * @package    atto_media"," * @copyright  2013 Damyon Wiese  <damyon@moodle.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * @module moodle-atto_media-button"," */","","/**"," * Atto media selection tool."," *"," * @namespace M.atto_media"," * @class Button"," * @extends M.editor_atto.EditorPlugin"," */","","var COMPONENTNAME = 'atto_media',","    MEDIA_TYPES = { LINK: 'LINK', VIDEO: 'VIDEO', AUDIO: 'AUDIO' },","    TRACK_KINDS = {","        SUBTITLES: 'SUBTITLES',","        CAPTIONS: 'CAPTIONS',","        DESCRIPTIONS: 'DESCRIPTIONS',","        CHAPTERS: 'CHAPTERS',","        METADATA: 'METADATA',","    },","    CSS = {","        SOURCE: 'atto_media_source',","        TRACK: 'atto_media_track',","        MEDIA_SOURCE: 'atto_media_media_source',","        LINK_SOURCE: 'atto_media_link_source',","        POSTER_SOURCE: 'atto_media_poster_source',","        TRACK_SOURCE: 'atto_media_track_source',","        DISPLAY_OPTIONS: 'atto_media_display_options',","        NAME_INPUT: 'atto_media_name_entry',","        TITLE_INPUT: 'atto_media_title_entry',","        URL_INPUT: 'atto_media_url_entry',","        POSTER_SIZE: 'atto_media_poster_size',","        LINK_SIZE: 'atto_media_link_size',","        WIDTH_INPUT: 'atto_media_width_entry',","        HEIGHT_INPUT: 'atto_media_height_entry',","        MINUTE_INPUT: 'atto_media_minute_entry',","        SECOND_INPUT: 'atto_media_second_entry',","        TRACK_KIND_INPUT: 'atto_media_track_kind_entry',","        TRACK_LABEL_INPUT: 'atto_media_track_label_entry',","        TRACK_LANG_INPUT: 'atto_media_track_lang_entry',","        TRACK_DEFAULT_SELECT: 'atto_media_track_default',","        MEDIA_CONTROLS_TOGGLE: 'atto_media_controls',","        MEDIA_AUTOPLAY_TOGGLE: 'atto_media_autoplay',","        MEDIA_MUTE_TOGGLE: 'atto_media_mute',","        MEDIA_LOOP_TOGGLE: 'atto_media_loop',","        ADVANCED_SETTINGS: 'atto_media_advancedsettings',","        QUESTIONS: 'atto_media_questions',","        QUESTIONS_CLASS: 'atto_media_questions_class',","        LINK: MEDIA_TYPES.LINK.toLowerCase(),","        VIDEO: MEDIA_TYPES.VIDEO.toLowerCase(),","        AUDIO: MEDIA_TYPES.AUDIO.toLowerCase(),","        TRACK_SUBTITLES: TRACK_KINDS.SUBTITLES.toLowerCase(),","        TRACK_CAPTIONS: TRACK_KINDS.CAPTIONS.toLowerCase(),","        TRACK_DESCRIPTIONS: TRACK_KINDS.DESCRIPTIONS.toLowerCase(),","        TRACK_CHAPTERS: TRACK_KINDS.CHAPTERS.toLowerCase(),","        TRACK_METADATA: TRACK_KINDS.METADATA.toLowerCase(),","    },","    SELECTORS = {","        SOURCE: '.' + CSS.SOURCE,","        TRACK: '.' + CSS.TRACK,","        MEDIA_SOURCE: '.' + CSS.MEDIA_SOURCE,","        POSTER_SOURCE: '.' + CSS.POSTER_SOURCE,","        TRACK_SOURCE: '.' + CSS.TRACK_SOURCE,","        DISPLAY_OPTIONS: '.' + CSS.DISPLAY_OPTIONS,","        NAME_INPUT: '.' + CSS.NAME_INPUT,","        TITLE_INPUT: '.' + CSS.TITLE_INPUT,","        URL_INPUT: '.' + CSS.URL_INPUT,","        POSTER_SIZE: '.' + CSS.POSTER_SIZE,","        LINK_SIZE: '.' + CSS.LINK_SIZE,","        WIDTH_INPUT: '.' + CSS.WIDTH_INPUT,","        HEIGHT_INPUT: '.' + CSS.HEIGHT_INPUT,","        MINUTE_INPUT: '.' + CSS.MINUTE_INPUT,","        SECOND_INPUT: '.' + CSS.SECOND_INPUT,","        TRACK_KIND_INPUT: '.' + CSS.TRACK_KIND_INPUT,","        TRACK_LABEL_INPUT: '.' + CSS.TRACK_LABEL_INPUT,","        TRACK_LANG_INPUT: '.' + CSS.TRACK_LANG_INPUT,","        TRACK_DEFAULT_SELECT: '.' + CSS.TRACK_DEFAULT_SELECT,","        MEDIA_CONTROLS_TOGGLE: '.' + CSS.MEDIA_CONTROLS_TOGGLE,","        MEDIA_AUTOPLAY_TOGGLE: '.' + CSS.MEDIA_AUTOPLAY_TOGGLE,","        MEDIA_MUTE_TOGGLE: '.' + CSS.MEDIA_MUTE_TOGGLE,","        MEDIA_LOOP_TOGGLE: '.' + CSS.MEDIA_LOOP_TOGGLE,","        ADVANCED_SETTINGS: '.' + CSS.ADVANCED_SETTINGS,","        QUESTIONS: '.' + CSS.QUESTIONS,","        LINK_TAB: 'li[data-medium-type=\"' + CSS.LINK + '\"]',","        LINK_PANE: '.tab-pane[data-medium-type=\"' + CSS.LINK + '\"]',","        VIDEO_TAB: 'li[data-medium-type=\"' + CSS.VIDEO + '\"]',","        VIDEO_PANE: '.tab-pane[data-medium-type=\"' + CSS.VIDEO + '\"]',","        AUDIO_TAB: 'li[data-medium-type=\"' + CSS.AUDIO + '\"]',","        AUDIO_PANE: '.tab-pane[data-medium-type=\"' + CSS.AUDIO + '\"]',","        TRACK_SUBTITLES_TAB: 'li[data-track-kind=\"' + CSS.TRACK_SUBTITLES + '\"]',","        TRACK_SUBTITLES_PANE: '.tab-pane[data-track-kind=\"' + CSS.TRACK_SUBTITLES + '\"]',","        TRACK_CAPTIONS_TAB: 'li[data-track-kind=\"' + CSS.TRACK_CAPTIONS + '\"]',","        TRACK_CAPTIONS_PANE: '.tab-pane[data-track-kind=\"' + CSS.TRACK_CAPTIONS + '\"]',","        TRACK_DESCRIPTIONS_TAB: 'li[data-track-kind=\"' + CSS.TRACK_DESCRIPTIONS + '\"]',","        TRACK_DESCRIPTIONS_PANE: '.tab-pane[data-track-kind=\"' + CSS.TRACK_DESCRIPTIONS + '\"]',","        TRACK_CHAPTERS_TAB: 'li[data-track-kind=\"' + CSS.TRACK_CHAPTERS + '\"]',","        TRACK_CHAPTERS_PANE: '.tab-pane[data-track-kind=\"' + CSS.TRACK_CHAPTERS + '\"]',","        TRACK_METADATA_TAB: 'li[data-track-kind=\"' + CSS.TRACK_METADATA + '\"]',","        TRACK_METADATA_PANE: '.tab-pane[data-track-kind=\"' + CSS.TRACK_METADATA + '\"]',","    },","    TEMPLATES = {","        ROOT: '' +","            '<form class=\"mform atto_form atto_media\" id=\"{{elementid}}_atto_media_form\">' +","            '<ul class=\"root nav nav-tabs mb-1\" role=\"tablist\">' +","            '<li data-medium-type=\"{{CSS.LINK}}\" class=\"nav-item\">' +","            '<a class=\"nav-link active\" href=\"#{{elementid}}_{{CSS.LINK}}\" role=\"tab\" data-toggle=\"tab\">' +","            '{{get_string \"link\" component}}' +","            '</a>' +","            '</li>' +","            '<li data-medium-type=\"{{CSS.VIDEO}}\" class=\"nav-item\">' +","            '<a class=\"nav-link\" href=\"#{{elementid}}_{{CSS.VIDEO}}\" role=\"tab\" data-toggle=\"tab\">' +","            '{{get_string \"video\" component}}' +","            '</a>' +","            '</li>' +","            '<li data-medium-type=\"{{CSS.AUDIO}}\" class=\"nav-item\">' +","            '<a class=\"nav-link\" href=\"#{{elementid}}_{{CSS.AUDIO}}\" role=\"tab\" data-toggle=\"tab\">' +","            '{{get_string \"audio\" component}}' +","            '</a>' +","            '</li>' +","            '</ul>' +","            '<div class=\"root tab-content\">' +","            '<div data-medium-type=\"{{CSS.LINK}}\" class=\"tab-pane active\" id=\"{{elementid}}_{{CSS.LINK}}\">' +","            '{{> tab_panes.link}}' +","            '</div>' +","            '<div data-medium-type=\"{{CSS.VIDEO}}\" class=\"tab-pane\" id=\"{{elementid}}_{{CSS.VIDEO}}\">' +","            '{{> tab_panes.video}}' +","            '</div>' +","            '<div data-medium-type=\"{{CSS.AUDIO}}\" class=\"tab-pane\" id=\"{{elementid}}_{{CSS.AUDIO}}\">' +","            '{{> tab_panes.audio}}' +","            '</div>' +","            '</div>' +","            '<div class=\"mdl-align\">' +","            '<br/>' +","            '<button class=\"btn btn-secondary submit\" type=\"submit\">{{get_string \"createmedia\" component}}</button>' +","            '</div>' +","            '</form>',","        TAB_PANES: {","            LINK: '' +","                '{{renderPartial \"form_components.source\" context=this id=CSS.LINK_SOURCE}}' +","                '<label for=\"{{elementid}}_link_nameentry\">{{get_string \"entername\" component}}</label>' +","                '<input class=\"form-control fullwidth {{CSS.NAME_INPUT}}\" type=\"text\" id=\"{{elementid}}_link_nameentry\"' +","                'size=\"32\" required=\"true\"/>',","            VIDEO: '' +","                '{{renderPartial \"form_components.source\" context=this id=CSS.MEDIA_SOURCE entersourcelabel=\"videosourcelabel\"' +","                ' addcomponentlabel=\"addsource\" multisource=\"true\" addsourcehelp=helpStrings.addsource}}' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_video-display-options\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_video-display-options\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"displayoptions\" component}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.display_options\" context=this id=CSS.VIDEO mediatype_video=true}}' +","                '</div>' +","                '</fieldset>' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_video-advanced-settings\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_video-advanced-settings\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"advancedsettings\" component}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.advanced_settings\" context=this id=CSS.VIDEO}}' +","                '</div>' +","                '</fieldset>' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_video-questions\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_video-questions\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">Questions</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.questions\" context=this id=CSS.VIDEO}}' +","                '</div>' +","                '</fieldset>' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_video-tracks\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_video-tracks\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"tracks\" component}} {{{helpStrings.tracks}}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.track_tabs\" context=this id=CSS.VIDEO}}' +","                '</div>' +","                '</fieldset>',","            AUDIO: '' +","                '{{renderPartial \"form_components.source\" context=this id=CSS.MEDIA_SOURCE entersourcelabel=\"audiosourcelabel\"' +","                ' addcomponentlabel=\"addsource\" multisource=\"true\" addsourcehelp=helpStrings.addsource}}' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_audio-display-options\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_audio-display-options\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"displayoptions\" component}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.display_options\" context=this id=CSS.AUDIO}}' +","                '</div>' +","                '</fieldset>' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_audio-advanced-settings\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_audio-advanced-settings\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"advancedsettings\" component}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.advanced_settings\" context=this id=CSS.AUDIO}}' +","                '</div>' +","                '</fieldset>' +","                '<fieldset class=\"collapsible collapsed\" id=\"{{elementid}}_audio-tracks\">' +","                '<input name=\"mform_isexpanded_{{elementid}}_audio-tracks\" type=\"hidden\">' +","                '<legend class=\"ftoggler\">{{get_string \"tracks\" component}} {{{helpStrings.tracks}}}</legend>' +","                '<div class=\"fcontainer\">' +","                '{{renderPartial \"form_components.track_tabs\" context=this id=CSS.AUDIO}}' +","                '</div>' +","                '</fieldset>'","        },","        FORM_COMPONENTS: {","            SOURCE: '' +","                '<div class=\"{{CSS.SOURCE}} {{id}}\">' +","                '<div class=\"mb-1\">' +","                '<label for=\"url-input\">' +","                '{{#entersourcelabel}}{{get_string ../entersourcelabel ../component}}{{/entersourcelabel}}' +","                '{{^entersourcelabel}}{{get_string \"entersource\" ../component}}{{/entersourcelabel}}' +","                '</label>' +","                '<div class=\"input-group input-append w-100\">' +","                '<input id=\"url-input\" class=\"form-control {{CSS.URL_INPUT}}\" type=\"url\" size=\"32\"/>' +","                '<span class=\"input-group-append\">' +","                '<button class=\"btn btn-secondary openmediabrowser\" type=\"button\">' +","                '{{get_string \"browserepositories\" component}}</button>' +","                '</span>' +","                '</div>' +","                '</div>' +","                '{{#multisource}}' +","                '{{renderPartial \"form_components.add_component\" context=../this label=../addcomponentlabel ' +","                ' help=../addsourcehelp}}' +","                '{{/multisource}}' +","                '</div>',","            ADD_COMPONENT: '' +","                '<div>' +","                '<a href=\"#\" class=\"addcomponent\">' +","                '{{#label}}{{get_string ../label ../component}}{{/label}}' +","                '{{^label}}{{get_string \"add\" ../component}}{{/label}}' +","                '</a>' +","                '{{#help}}{{{../help}}}{{/help}}' +","                '</div>',","            REMOVE_COMPONENT: '' +","                '<div>' +","                '<a href=\"#\" class=\"removecomponent\">' +","                '{{#label}}{{get_string ../label ../component}}{{/label}}' +","                '{{^label}}{{get_string \"remove\" ../component}}{{/label}}' +","                '</a>' +","                '</div>',","            DISPLAY_OPTIONS: '' +","                '<div class=\"{{CSS.DISPLAY_OPTIONS}}\">' +","                '<div class=\"mb-1\">' +","                '<label for=\"{{id}}_media-title-entry\">{{get_string \"entertitle\" component}}</label>' +","                '<input class=\"form-control fullwidth {{CSS.TITLE_INPUT}}\" type=\"text\" id=\"{{id}}_media-title-entry\"' +","                'size=\"32\"/>' +","                '</div>' +","                '<div class=\"clearfix\"></div>' +","                '{{#mediatype_video}}' +","                '<div class=\"mb-1\">' +","                '<label>{{get_string \"size\" component}}</label>' +","                '<div class=\"form-inline {{CSS.POSTER_SIZE}}\">' +","                '<label class=\"accesshide\">{{get_string \"videowidth\" component}}</label>' +","                '<input type=\"text\" class=\"form-control mr-1 {{CSS.WIDTH_INPUT}} input-mini\" size=\"4\"/>' +","                ' x ' +","                '<label class=\"accesshide\">{{get_string \"videoheight\" component}}</label>' +","                '<input type=\"text\" class=\"form-control ml-1 {{CSS.HEIGHT_INPUT}} input-mini\" size=\"4\"/>' +","                '</div>' +","                '</div>' +","                '<div class=\"clearfix\"></div>' +","                '{{renderPartial \"form_components.source\" context=this id=CSS.POSTER_SOURCE entersourcelabel=\"poster\"}}' +","                '{{/mediatype_video}}' +","                '<div>',","            QUESTIONS: '' +","                '<div class=\"{{CSS.QUESTIONS_CLASS}}\">' +","                '<div class=\"mb-1\">' +","                '<label for=\"{{id}}_media-questions\">Enter your question: </label>' +","                '<textarea class=\"form-control fullwidth {{CSS.QUESTIONS}}\" id=\"{{id}}_media-questions\"' +","                'size=\"125\"></textarea>' +","                '</div>' +","                '<div class=\"mb-1\">' +","                '<label>Time to place question at</label>' +","                '<div class=\"form-inline {{CSS.POSTER_SIZE}}\">' +","                '<label class=\"accesshide\">{{get_string \"videowidth\" component}}</label>' +","                '<input type=\"text\" class=\"form-control mr-1 {{CSS.MINUTE_INPUT}} input-mini\" size=\"2\"/>' +","                ':' +","                '<label class=\"accesshide\">{{get_string \"videoheight\" component}}</label>' +","                '<input type=\"text\" class=\"form-control ml-1 {{CSS.SECOND_INPUT}} input-mini\" size=\"2\"/>' +","                '</div>' +","                '</div>' +","                '<div class=\"clearfix\"></div>' +","                '<div>',","            ADVANCED_SETTINGS: '' +","                '<div class=\"{{CSS.ADVANCED_SETTINGS}}\">' +","                '<div class=\"form-check\">' +","                '<input type=\"checkbox\" checked=\"true\" class=\"form-check-input {{CSS.MEDIA_CONTROLS_TOGGLE}}\"' +","                'id=\"{{id}}_media-controls-toggle\"/>' +","                '<label class=\"form-check-label\" for=\"{{id}}_media-controls-toggle\">' +","                '{{get_string \"controls\" component}}' +","                '</label>' +","                '</div>' +","                '<div class=\"form-check\">' +","                '<input type=\"checkbox\" class=\"form-check-input {{CSS.MEDIA_AUTOPLAY_TOGGLE}}\"' +","                'id=\"{{id}}_media-autoplay-toggle\"/>' +","                '<label class=\"form-check-label\" for=\"{{id}}_media-autoplay-toggle\">' +","                '{{get_string \"autoplay\" component}}' +","                '</label>' +","                '</div>' +","                '<div class=\"form-check\">' +","                '<input type=\"checkbox\" class=\"form-check-input {{CSS.MEDIA_MUTE_TOGGLE}}\" ' +","                'id=\"{{id}}_media-mute-toggle\"/>' +","                '<label class=\"form-check-label\" for=\"{{id}}_media-mute-toggle\">' +","                '{{get_string \"mute\" component}}' +","                '</label>' +","                '</div>' +","                '<div class=\"form-check\">' +","                '<input type=\"checkbox\" class=\"form-check-input {{CSS.MEDIA_LOOP_TOGGLE}}\" ' +","                'id=\"{{id}}_media-loop-toggle\"/>' +","                '<label class=\"form-check-label\" for=\"{{id}}_media-loop-toggle\">' +","                '{{get_string \"loop\" component}}' +","                '</label>' +","                '</div>' +","                '</div>',","            TRACK_TABS: '' +","                '<ul class=\"nav nav-tabs mb-3\">' +","                '<li data-track-kind=\"{{CSS.TRACK_SUBTITLES}}\" class=\"nav-item\">' +","                '<a class=\"nav-link active\" href=\"#{{elementid}}_{{id}}_{{CSS.TRACK_SUBTITLES}}\"' +","                ' role=\"tab\" data-toggle=\"tab\">' +","                '{{get_string \"subtitles\" component}}' +","                '</a>' +","                '</li>' +","                '<li data-track-kind=\"{{CSS.TRACK_CAPTIONS}}\" class=\"nav-item\">' +","                '<a class=\"nav-link\" href=\"#{{elementid}}_{{id}}_{{CSS.TRACK_CAPTIONS}}\" role=\"tab\" data-toggle=\"tab\">' +","                '{{get_string \"captions\" component}}' +","                '</a>' +","                '</li>' +","                '<li data-track-kind=\"{{CSS.TRACK_DESCRIPTIONS}}\"  class=\"nav-item\">' +","                '<a class=\"nav-link\" href=\"#{{elementid}}_{{id}}_{{CSS.TRACK_DESCRIPTIONS}}\"' +","                ' role=\"tab\" data-toggle=\"tab\">' +","                '{{get_string \"descriptions\" component}}' +","                '</a>' +","                '</li>' +","                '<li data-track-kind=\"{{CSS.TRACK_CHAPTERS}}\" class=\"nav-item\">' +","                '<a class=\"nav-link\" href=\"#{{elementid}}_{{id}}_{{CSS.TRACK_CHAPTERS}}\" role=\"tab\" data-toggle=\"tab\">' +","                '{{get_string \"chapters\" component}}' +","                '</a>' +","                '</li>' +","                '<li data-track-kind=\"{{CSS.TRACK_METADATA}}\" class=\"nav-item\">' +","                '<a class=\"nav-link\" href=\"#{{elementid}}_{{id}}_{{CSS.TRACK_METADATA}}\" role=\"tab\" data-toggle=\"tab\">' +","                '{{get_string \"metadata\" component}}' +","                '</a>' +","                '</li>' +","                '</ul>' +","                '<div class=\"tab-content\">' +","                '<div data-track-kind=\"{{CSS.TRACK_SUBTITLES}}\" class=\"tab-pane active\"' +","                ' id=\"{{elementid}}_{{id}}_{{CSS.TRACK_SUBTITLES}}\">' +","                '<div class=\"trackhelp\">{{{helpStrings.subtitles}}}</div>' +","                '{{renderPartial \"form_components.track\" context=this sourcelabel=\"subtitlessourcelabel\"' +","                ' addcomponentlabel=\"addsubtitlestrack\"}}' +","                '</div>' +","                '<div data-track-kind=\"{{CSS.TRACK_CAPTIONS}}\" class=\"tab-pane\"' +","                ' id=\"{{elementid}}_{{id}}_{{CSS.TRACK_CAPTIONS}}\">' +","                '<div class=\"trackhelp\">{{{helpStrings.captions}}}</div>' +","                '{{renderPartial \"form_components.track\" context=this sourcelabel=\"captionssourcelabel\"' +","                ' addcomponentlabel=\"addcaptionstrack\"}}' +","                '</div>' +","                '<div data-track-kind=\"{{CSS.TRACK_DESCRIPTIONS}}\" class=\"tab-pane\"' +","                ' id=\"{{elementid}}_{{id}}_{{CSS.TRACK_DESCRIPTIONS}}\">' +","                '<div class=\"trackhelp\">{{{helpStrings.descriptions}}}</div>' +","                '{{renderPartial \"form_components.track\" context=this sourcelabel=\"descriptionssourcelabel\"' +","                ' addcomponentlabel=\"adddescriptionstrack\"}}' +","                '</div>' +","                '<div data-track-kind=\"{{CSS.TRACK_CHAPTERS}}\" class=\"tab-pane\"' +","                ' id=\"{{elementid}}_{{id}}_{{CSS.TRACK_CHAPTERS}}\">' +","                '<div class=\"trackhelp\">{{{helpStrings.chapters}}}</div>' +","                '{{renderPartial \"form_components.track\" context=this sourcelabel=\"chapterssourcelabel\"' +","                ' addcomponentlabel=\"addchapterstrack\"}}' +","                '</div>' +","                '<div data-track-kind=\"{{CSS.TRACK_METADATA}}\" class=\"tab-pane\"' +","                ' id=\"{{elementid}}_{{id}}_{{CSS.TRACK_METADATA}}\">' +","                '<div class=\"trackhelp\">{{{helpStrings.metadata}}}</div>' +","                '{{renderPartial \"form_components.track\" context=this sourcelabel=\"metadatasourcelabel\"' +","                ' addcomponentlabel=\"addmetadatatrack\"}}' +","                '</div>' +","                '</div>',","            TRACK: '' +","                '<div class=\"mb-1 {{CSS.TRACK}}\">' +","                '{{renderPartial \"form_components.source\" context=this id=CSS.TRACK_SOURCE entersourcelabel=sourcelabel}}' +","                '<div class=\"form-group\">' +","                '<label class=\"w-100\" for=\"lang-input\">{{get_string \"srclang\" component}}</label>' +","                '<select id=\"lang-input\" class=\"custom-select {{CSS.TRACK_LANG_INPUT}}\">' +","                '<optgroup label=\"{{get_string \"languagesinstalled\" component}}\">' +","                '{{#langsinstalled}}' +","                '<option value=\"{{code}}\" {{#default}}selected=\"selected\"{{/default}}>{{lang}}</option>' +","                '{{/langsinstalled}}' +","                '</optgroup>' +","                '<optgroup label=\"{{get_string \"languagesavailable\" component}} \">' +","                '{{#langsavailable}}<option value=\"{{code}}\">{{lang}}</option>{{/langsavailable}}' +","                '</optgroup>' +","                '</select>' +","                '</div>' +","                '<div class=\"form-group\">' +","                '<label class=\"w-100\" for=\"track-input\">{{get_string \"label\" component}}</label>' +","                '<input id=\"track-input\" class=\"form-control {{CSS.TRACK_LABEL_INPUT}}\" type=\"text\"/>' +","                '</div>' +","                '<div class=\"form-check\">' +","                '<input type=\"checkbox\" class=\"form-check-input {{CSS.TRACK_DEFAULT_SELECT}}\"/>' +","                '<label class=\"form-check-label\">{{get_string \"default\" component}}</label>' +","                '</div>' +","                '{{renderPartial \"form_components.add_component\" context=this label=addcomponentlabel}}' +","                '</div>'","        },","        HTML_MEDIA: {","            VIDEO: '' +","                \"<div style=float:left;width:100%;max-width:100%>\" +","                \"<script src=\\\"https://vjs.zencdn.net/7.8.4/video.js\\\"></script>\" +","                '&nbsp;<video ' +","                'class=\"video-js\"' +","                '{{#width}}width=\"{{../width}}\" {{/width}}' +","                '{{#height}}height=\"{{../height}}\" {{/height}}' +","                '{{#poster}}poster=\"{{../poster}}\" {{/poster}}' +","                '{{#showControls}}controls=\"true\" {{/showControls}}' +","                '{{#loop}}loop=\"true\" {{/loop}}' +","                '{{#muted}}muted=\"true\" {{/muted}}' +","                '{{#autoplay}}autoplay=\"true\" {{/autoplay}}' +","                '{{#title}}title=\"{{../title}}\" {{/title}}' +","                '>' +","                '{{#sources}}<source src=\"{{source}}\">{{/sources}}' +","                '{{#tracks}}' +","                '<track src=\"{{track}}\" kind=\"{{kind}}\" srclang=\"{{srclang}}\" label=\"{{label}}\"' +","                ' {{#defaultTrack}}default=\"true\"{{/defaultTrack}}>' +","                '{{/tracks}}' +","                '{{#description}}{{../description}}{{/description}}' +","                '</video>&nbsp' +","                '</div>' +","                \"{{#questions}}\" +","                \"<div id=media_question data-question= '{{../questions}}'</div> {{/questions}}\" +","                \"{{#minute}} <div id=media_minute data-minute ='{{../minute}}' </div>{{/minute}} \" +","                \"{{#second}} <div id=media_second data-second ='{{../second}}' </div> {{/second}}\" +","                \"<script> src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>\" +","                \"<script>\" +","                \"var checkExist = setInterval(function() {\" +","                \"var doc = document.getElementsByClassName(\\\"video-js\\\")[0];\" +","                \"if (videojs.getPlayer(doc.id).id_.length > 0) {\" +","                \"execute();\" +","                \"clearInterval(checkExist);\" +","                \"}\" +","                \"}, 100);\" +","                \"function execute() {\" +","                \"var box = document.querySelector('[style=\\\"max-width:400px;\\\"]');\" +","                \"box.style[\\\"max-width\\\"] = \\\"75%\\\";\" +","                \"var cls = document.getElementById('page-mod-page-view') || document.getElementById('page-mod-assign-view');\" +","                \"cls = cls.className;\" +","                \"var t = cls.split(' ').find(el => el.substring(0, 4) === 'cmid');\" +","                \"cls = parseInt(t.substring(t.indexOf('-') + 1));\" +","                \"var doc = document.getElementsByClassName(\\\"video-js\\\")[0];\" +","                \"var myPlayer = videojs.getPlayer(doc.id);\" +","                \"myPlayer.fluid(true);\" +","                \"var title = doc.title;\" +","                \"var furthestwatched = 0;\" +","                \"var played = 0;\" +","                \"var watched = new Boolean(false);\" +","                \"myPlayer.ready(function() {\" +","                //\"question = {{../questions}}\" +","                //\"if(question){\" +","                \"var q= document.getElementById('media_question');\" +","                \"if (q){\" +","                \"this.on('timeupdate', addQuestion);\" +","                \"this.on('seeked', function(){ myPlayer.pause(); addQuestion(); });\" +","                \"function addQuestion() {\" +","                \"var minutes = document.getElementById('media_minute');\" +","                \"var seconds = document.getElementById('media_second');\" +","                \"if(minutes){ minutes= parseInt(minutes.getAttribute('data-minute') || 0);}\" +","                \"else{ minutes = 0;}\" +","                \"if(seconds){ seconds = parseInt(seconds.getAttribute('data-second') || 0);}\" +","                \"else{ seconds = 0;}\" +","                \"seconds = (minutes * 60) + seconds;\" +","                \"if (this.currentTime() > seconds && watched == false) {\" +","                \"watched = new Boolean(true);\" +","                \"myPlayer.pause();\" +","                \"var player = this, options ={};\" +","                \"options.content = 'In the  modal';\" +","                \"options.label = 'the label';\" +","                \"var width = Math.round(myPlayer.currentWidth() * 0.5) + \\\"px\\\";\" +","                \"var height = Math.round(myPlayer.currentHeight() * 0.5) + \\\"px\\\";\" +","                \"var newElement = document.createElement('div');\" +","                \"var question = q.getAttribute('data-question');\" +","                \"newElement.innerHTML = \\\"<form> <label style='font-size:3em;' for='response_text'>\\\" + question + \\\":\" +","                \"</label><br><textarea style='border-radius:12px; width:\\\" + width + \\\"; height:\\\" + height + \\\"; font-size:2em;'\" +","                \"id='response_text' name='response_text' rows='6' cols='50'></textarea><br><br><input type='submit'\" +","                \"style='border-radius:8px; font-size:2.5em;'  value='Submit your response'></form>\\\";\" +","                \"options.content = newElement;\" +","                \"var ModalDialog = videojs.getComponent('ModalDialog');\" +","                \"var myModal = new ModalDialog(player, options);\" +","                \"player.addChild(myModal);\" +","                \"myModal.open();\" +","                \"myModal.on('modalclose', function() {\" +","                \"myPlayer.play();\" +","                \"});\" +","                \"$('form').submit(function(event) {\" +","                \"console.log(\\\"Form Submitted!\\\");\" +","                \"var resp = $('textarea[name=response_text]').val();\" +","                \"require(['core/ajax'],\" +","                \"function(ajax) {\" +","                \"ajax.call([{\" +","                \"methodname: 'mod_page_submit_video_response',\" +","                \"method: 'POST',\" +","                \"args: {\" +","                \"pageid: cls,\" +","                \"\" +","                \"videoid: title,\" +","                \"videoresponse: resp\" +","                \"},\" +","                \"done: console.log(\\\"recorded video response.\\\"),\" +","                \"fail: console.log(\\\"\\\"),\" +","                \"}]);\" +","                \"});\" +","                \"myModal.close();\" +","                \"event.preventDefault();\" +","                \"});\" +","                \"} else {}\" +","                \"}\" +","                \"}\" +","                \"this.on('pause', function() {\" +","                \"console.log('paused');\" +","                \"if (myPlayer.played().length > played) {\" +","                \"var thisstart = Math.round(myPlayer.played().start(played));\" +","                \"var thisend = Math.round(myPlayer.played().end(played));\" +","                \"if (thisstart == thisend) {\" +","                \"return;}\" +","                \"played++;\" +","                \"furthestwatched = thisend;\" +","                \"} else {\" +","                \"var thisstart = furthestwatched;\" +","                \"var thisend = Math.round(myPlayer.played().end(played - 1));\" +","                \"if (thisstart == thisend) {\" +","                \"return;\" +","                \"}\" +","                \"furthestwatched = thisend;\" +","                \"}\" +","                \"require(['core/ajax'],\" +","                \"function(ajax) {\" +","                \"ajax.call([{\" +","                \"methodname: 'mod_page_view_video',\" +","                \"method: 'POST',\" +","                \"args: {\" +","                \"pageid: cls,\" +","                \"videoid: title,\" +","                \"thisstart: thisstart,\" +","                \"thisend: thisend\" +","                \"},\" +","                \"done: console.log('logged latest watch'),\" +","                \"fail: console.log(''),\" +","                \"}]);\" +","                \"});\" +","                \"})\" +","                \"});\" +","                \"}\" +","                \"</script>\" +","                \"</div>\",","            AUDIO: '' +","                '&nbsp;<audio ' +","                '{{#showControls}}controls=\"true\" {{/showControls}}' +","                '{{#loop}}loop=\"true\" {{/loop}}' +","                '{{#muted}}muted=\"true\" {{/muted}}' +","                '{{#autoplay}}autoplay=\"true\" {{/autoplay}}' +","                '{{#title}}title=\"{{../title}}\" {{/title}}' +","                '>' +","                '{{#sources}}<source src=\"{{source}}\">{{/sources}}' +","                '{{#tracks}}' +","                '<track src=\"{{track}}\" kind=\"{{kind}}\" srclang=\"{{srclang}}\" label=\"{{label}}\"' +","                ' {{#defaultTrack}}default=\"true\"{{/defaultTrack}}>' +","                '{{/tracks}}' +","                '{{#description}}{{../description}}{{/description}}' +","                '</audio>&nbsp',","            LINK: '' +","                '<a href=\"{{url}}\" ' +","                '{{#width}}data-width=\"{{../width}}\" {{/width}}' +","                '{{#height}}data-height=\"{{../height}}\"{{/height}}' +","                '>{{#name}}{{../name}}{{/name}}{{^name}}{{../url}}{{/name}}</a>'","        }","    };","","Y.namespace('M.atto_media').Button = Y.Base.create('button', Y.M.editor_atto.EditorPlugin, [], {","","    initializer: function() {","        if (this.get('host').canShowFilepicker('media')) {","            this.editor.delegate('dblclick', this._displayDialogue, 'video', this);","            this.editor.delegate('click', this._handleClick, 'video', this);","","            this.addButton({","                icon: 'e/insert_edit_video',","                callback: this._displayDialogue,","                tags: 'video, audio',","                tagMatchRequiresAll: false","            });","        }","    },","","    /**","     * Gets the root context for all templates, with extra supplied context.","     *","     * @method _getContext","     * @param  {Object} extra The extra context to add","     * @return {Object}","     * @private","     */","    _getContext: function(extra) {","        return Y.merge({","            elementid: this.get('host').get('elementid'),","            component: COMPONENTNAME,","            langsinstalled: this.get('langs').installed,","            langsavailable: this.get('langs').available,","            helpStrings: this.get('help'),","            CSS: CSS","        }, extra);","    },","","    /**","     * Handles a click on a media element.","     *","     * @method _handleClick","     * @param  {EventFacade} e","     * @private","     */","    _handleClick: function(e) {","        var medium = e.target;","","        var selection = this.get('host').getSelectionFromNode(medium);","        if (this.get('host').getSelection() !== selection) {","            this.get('host').setSelection(selection);","        }","    },","","    /**","     * Display the media editing tool.","     *","     * @method _displayDialogue","     * @private","     */","    _displayDialogue: function() {","        if (this.get('host').getSelection() === false) {","            return;","        }","","        if (!('renderPartial' in Y.Handlebars.helpers)) {","            (function smashPartials(chain, obj) {","                Y.each(obj, function(value, index) {","                    chain.push(index);","                    if (typeof value !== \"object\") {","                        Y.Handlebars.registerPartial(chain.join('.').toLowerCase(), value);","                    } else {","                        smashPartials(chain, value);","                    }","                    chain.pop();","                });","            })([], TEMPLATES);","","            Y.Handlebars.registerHelper('renderPartial', function(partialName, options) {","                if (!partialName) {","                    return '';","                }","","                var partial = Y.Handlebars.partials[partialName];","                var parentContext = options.hash.context ? Y.clone(options.hash.context) : {};","                var context = Y.merge(parentContext, options.hash);","                delete context.context;","","                if (!partial) {","                    return '';","                }","                return new Y.Handlebars.SafeString(Y.Handlebars.compile(partial)(context));","            });","        }","","        var dialogue = this.getDialogue({","            headerContent: M.util.get_string('createmedia', COMPONENTNAME),","            focusAfterHide: true,","            width: 660,","            focusOnShowSelector: SELECTORS.URL_INPUT","        });","","        // Set the dialogue content, and then show the dialogue.","        dialogue.set('bodyContent', this._getDialogueContent(this.get('host').getSelection())).show();","        M.form.shortforms({ formid: this.get('host').get('elementid') + '_atto_media_form' });","    },","","    /**","     * Returns the dialogue content for the tool.","     *","     * @method _getDialogueContent","     * @param  {WrappedRange[]} selection Current editor selection","     * @return {Y.Node}","     * @private","     */","    _getDialogueContent: function(selection) {","        var content = Y.Node.create(","            Y.Handlebars.compile(TEMPLATES.ROOT)(this._getContext())","        );","","        var medium = this.get('host').getSelectedNodes().filter('video,audio').shift();","        var mediumProperties = medium ? this._getMediumProperties(medium) : false;","        return this._attachEvents(this._applyMediumProperties(content, mediumProperties), selection);","    },","","    /**","     * Attaches required events to the content node.","     *","     * @method _attachEvents","     * @param  {Y.Node}         content The content to which events will be attached","     * @param  {WrappedRange[]} selection Current editor selection","     * @return {Y.Node}","     * @private","     */","    _attachEvents: function(content, selection) {","        // Delegate add component link for media source fields.","        content.delegate('click', function(e) {","            e.preventDefault();","            this._addMediaSourceComponent(e.currentTarget);","        }, SELECTORS.MEDIA_SOURCE + ' .addcomponent', this);","","        // Delegate add component link for track fields.","        content.delegate('click', function(e) {","            e.preventDefault();","            this._addTrackComponent(e.currentTarget);","        }, SELECTORS.TRACK + ' .addcomponent', this);","","        // Only allow one track per tab to be selected as \"default\".","        content.delegate('click', function(e) {","            var element = e.currentTarget;","            if (element.get('checked')) {","                var getKind = function(el) {","                    return this._getTrackTypeFromTabPane(el.ancestor('.tab-pane'));","                }.bind(this);","","                element.ancestor('.root.tab-content').all(SELECTORS.TRACK_DEFAULT_SELECT).each(function(select) {","                    if (select !== element && getKind(element) === getKind(select)) {","                        select.set('checked', false);","                    }","                });","            }","        }, SELECTORS.TRACK_DEFAULT_SELECT, this);","","        // Set up filepicker click event.","        content.delegate('click', function(e) {","            var element = e.currentTarget;","            var fptype = (element.ancestor(SELECTORS.POSTER_SOURCE) && 'image') ||","                (element.ancestor(SELECTORS.TRACK_SOURCE) && 'subtitle') ||","                'media';","            e.preventDefault();","            this.get('host').showFilepicker(fptype, this._getFilepickerCallback(element, fptype), this);","        }, '.openmediabrowser', this);","","        // This is a nasty hack. Basically we are using BS4 markup for the tabs","        // but it isn't completely backwards compatible with BS2. The main problem is","        // that the \"active\" class goes on a different node. So the idea is to put it","        // the node for BS4, and then use CSS to make it look right in BS2. However,","        // once another tab is clicked, everything sorts itself out, more or less. Except","        // that the original \"active\" tab hasn't had the BS4 \"active\" class removed","        // (so the styles will still apply to it). So we need to remove the \"active\"","        // class on the BS4 node so that BS2 is happy.","        //","        // This doesn't upset BS4 since it removes this class anyway when clicking on","        // another tab.","        content.all('.nav-item').on('click', function(elem) {","            elem.currentTarget.get('parentNode').all('.active').removeClass('active');","        });","","        content.one('.submit').on('click', function(e) {","            e.preventDefault();","            var mediaHTML = this._getMediaHTML(e.currentTarget.ancestor('.atto_form')),","                host = this.get('host');","            this.getDialogue({","                focusAfterHide: null","            }).hide();","            if (mediaHTML) {","                host.setSelection(selection);","                host.insertContentAtFocusPoint(mediaHTML);","                this.markUpdated();","            }","        }, this);","","        return content;","    },","","    /**","     * Applies medium properties to the content node.","     *","     * @method _applyMediumProperties","     * @param  {Y.Node} content The content to apply the properties to","     * @param  {object} properties The medium properties to apply","     * @return {Y.Node}","     * @private","     */","    _applyMediumProperties: function(content, properties) {","        if (!properties) {","            return content;","        }","","        var applyTrackProperties = function(track, properties) {","            track.one(SELECTORS.TRACK_SOURCE + ' ' + SELECTORS.URL_INPUT).set('value', properties.src);","            track.one(SELECTORS.TRACK_LANG_INPUT).set('value', properties.srclang);","            track.one(SELECTORS.TRACK_LABEL_INPUT).set('value', properties.label);","            track.one(SELECTORS.TRACK_DEFAULT_SELECT).set('checked', properties.defaultTrack);","        };","","        var tabPane = content.one('.root.tab-content > .tab-pane#' + this.get('host').get('elementid') +","            '_' + properties.type.toLowerCase());","","        // Populate sources.","        tabPane.one(SELECTORS.MEDIA_SOURCE + ' ' + SELECTORS.URL_INPUT).set('value', properties.sources[0]);","        Y.Array.each(properties.sources.slice(1), function(source) {","            this._addMediaSourceComponent(tabPane.one(SELECTORS.MEDIA_SOURCE + ' .addcomponent'), function(newComponent) {","                newComponent.one(SELECTORS.URL_INPUT).set('value', source);","            });","        }, this);","","        // Populate tracks.","        Y.Object.each(properties.tracks, function(value, key) {","            var trackData = value.length ? value : [{ src: '', srclang: '', label: '', defaultTrack: false }];","            var paneSelector = SELECTORS['TRACK_' + key.toUpperCase() + '_PANE'];","","            applyTrackProperties(tabPane.one(paneSelector + ' ' + SELECTORS.TRACK), trackData[0]);","            Y.Array.each(trackData.slice(1), function(track) {","                this._addTrackComponent(","                    tabPane.one(paneSelector + ' ' + SELECTORS.TRACK + ' .addcomponent'),","                    function(newComponent) {","                        applyTrackProperties(newComponent, track);","                    });","            }, this);","        }, this);","","        // Populate values.","        tabPane.one(SELECTORS.TITLE_INPUT).set('value', properties.title);","        tabPane.one(SELECTORS.MEDIA_CONTROLS_TOGGLE).set('checked', properties.controls);","        tabPane.one(SELECTORS.MEDIA_AUTOPLAY_TOGGLE).set('checked', properties.autoplay);","        tabPane.one(SELECTORS.MEDIA_MUTE_TOGGLE).set('checked', properties.muted);","        tabPane.one(SELECTORS.MEDIA_LOOP_TOGGLE).set('checked', properties.loop);","","        // Determine medium type.","        var mediumType = this._getMediumTypeFromTabPane(tabPane);","","        if (mediumType === 'video') {","            // Populate values unique for video.","            tabPane.one(SELECTORS.POSTER_SOURCE + ' ' + SELECTORS.URL_INPUT).setAttribute('value', properties.poster);","            tabPane.one(SELECTORS.WIDTH_INPUT).set('value', properties.width);","            tabPane.one(SELECTORS.HEIGHT_INPUT).set('value', properties.height);","            tabPane.one(SELECTORS.QUESTIONS).set('value', properties.questions);","            tabPane.one(SELECTORS.MINUTE_INPUT).set('value', properties.minute);","            tabPane.one(SELECTORS.SECOND_INPUT).set('value', properties.second);","        }","","        // Switch to the correct tab.","        // Remove active class from all tabs + tab panes.","        tabPane.siblings('.active').removeClass('active');","        content.all('.root.nav-tabs .nav-item a').removeClass('active');","","        // Add active class to the desired tab and tab pane.","        tabPane.addClass('active');","        content.one(SELECTORS[mediumType.toUpperCase() + '_TAB'] + ' a').addClass('active');","","        return content;","    },","","    /**","     * Extracts medium properties.","     *","     * @method _getMediumProperties","     * @param  {Y.Node} medium The medium node from which to extract","     * @return {Object}","     * @private","     */","    _getMediumProperties: function(medium) {","        var boolAttr = function(elem, attr) {","            // As explained in MDL-64175, some OS (like Ubuntu), are removing the value for these attributes.","            // So in order to check if attr=\"true\", we need to check if the attribute exists and if the value is empty or true.","            return (elem.hasAttribute(attr) && (elem.getAttribute(attr) || elem.getAttribute(attr) === ''));","        };","","        var tracks = {","            subtitles: [],","            captions: [],","            descriptions: [],","            chapters: [],","            metadata: []","        };","","        medium.all('track').each(function(track) {","            tracks[track.getAttribute('kind')].push({","                src: track.getAttribute('src'),","                srclang: track.getAttribute('srclang'),","                label: track.getAttribute('label'),","                defaultTrack: boolAttr(track, 'default')","            });","        });","","        return {","            type: medium.test('video') ? MEDIA_TYPES.VIDEO : MEDIA_TYPES.AUDIO,","            sources: medium.all('source').get('src'),","            poster: medium.getAttribute('poster'),","            title: medium.getAttribute('title'),","            width: medium.getAttribute('width'),","            height: medium.getAttribute('height'),","            questions: medium.getAttribute('questions'),","            minute: medium.getAttribute('minute'),","            second: medium.getAttribute('second'),","            autoplay: boolAttr(medium, 'autoplay'),","            loop: boolAttr(medium, 'loop'),","            muted: boolAttr(medium, 'muted'),","            controls: boolAttr(medium, 'controls'),","            tracks: tracks","        };","    },","","    /**","     * Adds a track form component.","     *","     * @method _addTrackComponent","     * @param  {Y.Node}   element    The element which was used to trigger this function","     * @param  {Function} [callback] Function to be called when the new component is added","     *     @param {Y.Node}    callback.newComponent The compiled component","     * @private","     */","    _addTrackComponent: function(element, callback) {","        var trackType = this._getTrackTypeFromTabPane(element.ancestor('.tab-pane'));","        var context = this._getContext({","            sourcelabel: trackType + 'sourcelabel',","            addcomponentlabel: 'add' + trackType + 'track'","        });","","        this._addComponent(element, TEMPLATES.FORM_COMPONENTS.TRACK, SELECTORS.TRACK, context, callback);","    },","","    /**","     * Adds a media source form component.","     *","     * @method _addMediaSourceComponent","     * @param  {Y.Node}   element    The element which was used to trigger this function","     * @param  {Function} [callback] Function to be called when the new component is added","     *     @param {Y.Node}    callback.newComponent The compiled component","     * @private","     */","    _addMediaSourceComponent: function(element, callback) {","        var mediumType = this._getMediumTypeFromTabPane(element.ancestor('.tab-pane'));","        var context = this._getContext({","            multisource: true,","            id: CSS.MEDIA_SOURCE,","            entersourcelabel: mediumType + 'sourcelabel',","            addcomponentlabel: 'addsource',","            addsourcehelp: this.get('help').addsource","        });","        this._addComponent(element, TEMPLATES.FORM_COMPONENTS.SOURCE, SELECTORS.MEDIA_SOURCE, context, callback);","    },","","    /**","     * Adds an arbitrary form component.","     *","     * This function Compiles and adds the provided component in the supplied 'ancestor' container.","     * It will also add links to add/remove the relevant components, attaching the","     * necessary events.","     *","     * @method _addComponent","     * @param  {Y.Node}   element    The element which was used to trigger this function","     * @param  {String}   component  The component to compile and add","     * @param  {String}   ancestor   A selector used to find an ancestor of 'component', to which","     *                               the compiled component will be appended","     * @param  {Object}   context    The context with which to render the component","     * @param  {Function} [callback] Function to be called when the new component is added","     *     @param {Y.Node}    callback.newComponent The compiled component","     * @private","     */","    _addComponent: function(element, component, ancestor, context, callback) {","        var currentComponent = element.ancestor(ancestor),","            newComponent = Y.Node.create(Y.Handlebars.compile(component)(context)),","            removeNodeContext = this._getContext(context);","","        removeNodeContext.label = \"remove\";","        var removeNode = Y.Node.create(Y.Handlebars.compile(TEMPLATES.FORM_COMPONENTS.REMOVE_COMPONENT)(removeNodeContext));","","        removeNode.one('.removecomponent').on('click', function(e) {","            e.preventDefault();","            currentComponent.remove(true);","        });","","        currentComponent.insert(newComponent, 'after');","        element.ancestor().insert(removeNode, 'after');","        element.ancestor().remove(true);","","        if (callback) {","            callback.call(this, newComponent);","        }","    },","","    /**","     * Returns the callback for the file picker to call after a file has been selected.","     *","     * @method _getFilepickerCallback","     * @param  {Y.Node} element The element which triggered the callback","     * @param  {String} fptype  The file pickertype (as would be passed to `showFilePicker`)","     * @return {Function} The function to be used as a callback when the file picker returns the file","     * @private","     */","    _getFilepickerCallback: function(element, fptype) {","        return function(params) {","            if (params.url !== '') {","                var tabPane = element.ancestor('.tab-pane');","                element.ancestor(SELECTORS.SOURCE).one(SELECTORS.URL_INPUT).set('value', params.url);","","                // Links (and only links) have a name field.","                if (tabPane.get('id') === this.get('host').get('elementid') + '_' + CSS.LINK) {","                    tabPane.one(SELECTORS.NAME_INPUT).set('value', params.file);","                }","","                if (fptype === 'subtitle') {","                    var subtitleLang = params.file.split('.vtt')[0].split('-').slice(-1)[0];","                    var langObj = this.get('langs').available.reduce(function(carry, lang) {","                        return lang.code === subtitleLang ? lang : carry;","                    }, false);","                    if (langObj) {","                        element.ancestor(SELECTORS.TRACK).one(SELECTORS.TRACK_LABEL_INPUT).set('value',","                            langObj.lang.substr(0, langObj.lang.lastIndexOf(' ')));","                        element.ancestor(SELECTORS.TRACK).one(SELECTORS.TRACK_LANG_INPUT).set('value', langObj.code);","                    }","                }","            }","        };","    },","","    /**","     * Given a \"medium\" tab pane, returns what kind of medium it contains.","     *","     * @method _getMediumTypeFromTabPane","     * @param  {Y.Node} tabPane The tab pane","     * @return {String} The type of medium in the pane","     */","    _getMediumTypeFromTabPane: function(tabPane) {","        return tabPane.getAttribute('data-medium-type');","    },","","    /**","     * Given a \"track\" tab pane, returns what kind of track it contains.","     *","     * @method _getTrackTypeFromTabPane","     * @param  {Y.Node} tabPane The tab pane","     * @return {String} The type of track in the pane","     */","    _getTrackTypeFromTabPane: function(tabPane) {","        return tabPane.getAttribute('data-track-kind');","    },","","    /**","     * Returns the HTML to be inserted to the text area.","     *","     * @method _getMediaHTML","     * @param  {Y.Node} form The form from which to extract data","     * @return {String} The compiled markup","     * @private","     */","    _getMediaHTML: function(form) {","        var mediumType = this._getMediumTypeFromTabPane(form.one('.root.tab-content > .tab-pane.active'));","        var tabContent = form.one(SELECTORS[mediumType.toUpperCase() + '_PANE']);","","        return this['_getMediaHTML' + mediumType[0].toUpperCase() + mediumType.substr(1)](tabContent);","    },","","    /**","     * Returns the HTML to be inserted to the text area for the link tab.","     *","     * @method _getMediaHTMLLink","     * @param  {Y.Node} tab The tab from which to extract data","     * @return {String} The compiled markup","     * @private","     */","    _getMediaHTMLLink: function(tab) {","        var context = {","            url: tab.one(SELECTORS.URL_INPUT).get('value'),","            name: tab.one(SELECTORS.NAME_INPUT).get('value') || false","        };","","        return context.url ? Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.LINK)(context) : '';","    },","","    /**","     * Returns the HTML to be inserted to the text area for the video tab.","     *","     * @method _getMediaHTMLVideo","     * @param  {Y.Node} tab The tab from which to extract data","     * @return {String} The compiled markup","     * @private","     */","    _getMediaHTMLVideo: function(tab) {","        var context = this._getContextForMediaHTML(tab);","        context.width = tab.one(SELECTORS.WIDTH_INPUT).get('value') || false;","        context.height = tab.one(SELECTORS.HEIGHT_INPUT).get('value') || false;","        context.poster = tab.one(SELECTORS.POSTER_SOURCE + ' ' + SELECTORS.URL_INPUT).get('value') || false;","        context.minute = tab.one(SELECTORS.MINUTE_INPUT).get('value') || false;","        context.second = tab.one(SELECTORS.SECOND_INPUT).get('value') || false;","        context.questions = tab.one(SELECTORS.QUESTIONS).get('value') || false;","        return context.sources.length ? Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.VIDEO)(context) : '';","    },","","    /**","     * Returns the HTML to be inserted to the text area for the audio tab.","     *","     * @method _getMediaHTMLAudio","     * @param  {Y.Node} tab The tab from which to extract data","     * @return {String} The compiled markup","     * @private","     */","    _getMediaHTMLAudio: function(tab) {","        var context = this._getContextForMediaHTML(tab);","","        return context.sources.length ? Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.AUDIO)(context) : '';","    },","","    /**","     * Returns the context with which to render a media template.","     *","     * @method _getContextForMediaHTML","     * @param  {Y.Node} tab The tab from which to extract data","     * @return {Object}","     * @private","     */","    _getContextForMediaHTML: function(tab) {","        var tracks = [];","","        tab.all(SELECTORS.TRACK).each(function(track) {","            tracks.push({","                track: track.one(SELECTORS.TRACK_SOURCE + ' ' + SELECTORS.URL_INPUT).get('value'),","                kind: this._getTrackTypeFromTabPane(track.ancestor('.tab-pane')),","                label: track.one(SELECTORS.TRACK_LABEL_INPUT).get('value') ||","                    track.one(SELECTORS.TRACK_LANG_INPUT).get('value'),","                srclang: track.one(SELECTORS.TRACK_LANG_INPUT).get('value'),","                defaultTrack: track.one(SELECTORS.TRACK_DEFAULT_SELECT).get('checked') ? \"true\" : null","            });","        }, this);","","        return {","            sources: tab.all(SELECTORS.MEDIA_SOURCE + ' ' + SELECTORS.URL_INPUT).get('value').filter(function(source) {","                return !!source;","            }).map(function(source) {","                return { source: source };","            }),","            description: tab.one(SELECTORS.MEDIA_SOURCE + ' ' + SELECTORS.URL_INPUT).get('value') || false,","            tracks: tracks.filter(function(track) {","                return !!track.track;","            }),","            showControls: tab.one(SELECTORS.MEDIA_CONTROLS_TOGGLE).get('checked'),","            autoplay: tab.one(SELECTORS.MEDIA_AUTOPLAY_TOGGLE).get('checked'),","            muted: tab.one(SELECTORS.MEDIA_MUTE_TOGGLE).get('checked'),","            loop: tab.one(SELECTORS.MEDIA_LOOP_TOGGLE).get('checked'),","            title: tab.one(SELECTORS.TITLE_INPUT).get('value') || false","        };","    }","}, {","    ATTRS: {","        langs: {},","        help: {}","    }","});","","","}, '@VERSION@', {\"requires\": [\"moodle-editor_atto-plugin\", \"moodle-form-shortforms\"]});","","}());"]};
}
__cov_rE9vzJ60_FO4xOugmxKTkg = __cov_rE9vzJ60_FO4xOugmxKTkg['build/moodle-atto_media-button/moodle-atto_media-button.js'];
__cov_rE9vzJ60_FO4xOugmxKTkg.s['1']++;YUI.add('moodle-atto_media-button',function(Y,NAME){__cov_rE9vzJ60_FO4xOugmxKTkg.f['1']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['2']++;var COMPONENTNAME='atto_media',MEDIA_TYPES={LINK:'LINK',VIDEO:'VIDEO',AUDIO:'AUDIO'},TRACK_KINDS={SUBTITLES:'SUBTITLES',CAPTIONS:'CAPTIONS',DESCRIPTIONS:'DESCRIPTIONS',CHAPTERS:'CHAPTERS',METADATA:'METADATA'},CSS={SOURCE:'atto_media_source',TRACK:'atto_media_track',MEDIA_SOURCE:'atto_media_media_source',LINK_SOURCE:'atto_media_link_source',POSTER_SOURCE:'atto_media_poster_source',TRACK_SOURCE:'atto_media_track_source',DISPLAY_OPTIONS:'atto_media_display_options',NAME_INPUT:'atto_media_name_entry',TITLE_INPUT:'atto_media_title_entry',URL_INPUT:'atto_media_url_entry',POSTER_SIZE:'atto_media_poster_size',LINK_SIZE:'atto_media_link_size',WIDTH_INPUT:'atto_media_width_entry',HEIGHT_INPUT:'atto_media_height_entry',MINUTE_INPUT:'atto_media_minute_entry',SECOND_INPUT:'atto_media_second_entry',TRACK_KIND_INPUT:'atto_media_track_kind_entry',TRACK_LABEL_INPUT:'atto_media_track_label_entry',TRACK_LANG_INPUT:'atto_media_track_lang_entry',TRACK_DEFAULT_SELECT:'atto_media_track_default',MEDIA_CONTROLS_TOGGLE:'atto_media_controls',MEDIA_AUTOPLAY_TOGGLE:'atto_media_autoplay',MEDIA_MUTE_TOGGLE:'atto_media_mute',MEDIA_LOOP_TOGGLE:'atto_media_loop',ADVANCED_SETTINGS:'atto_media_advancedsettings',QUESTIONS:'atto_media_questions',QUESTIONS_CLASS:'atto_media_questions_class',LINK:MEDIA_TYPES.LINK.toLowerCase(),VIDEO:MEDIA_TYPES.VIDEO.toLowerCase(),AUDIO:MEDIA_TYPES.AUDIO.toLowerCase(),TRACK_SUBTITLES:TRACK_KINDS.SUBTITLES.toLowerCase(),TRACK_CAPTIONS:TRACK_KINDS.CAPTIONS.toLowerCase(),TRACK_DESCRIPTIONS:TRACK_KINDS.DESCRIPTIONS.toLowerCase(),TRACK_CHAPTERS:TRACK_KINDS.CHAPTERS.toLowerCase(),TRACK_METADATA:TRACK_KINDS.METADATA.toLowerCase()},SELECTORS={SOURCE:'.'+CSS.SOURCE,TRACK:'.'+CSS.TRACK,MEDIA_SOURCE:'.'+CSS.MEDIA_SOURCE,POSTER_SOURCE:'.'+CSS.POSTER_SOURCE,TRACK_SOURCE:'.'+CSS.TRACK_SOURCE,DISPLAY_OPTIONS:'.'+CSS.DISPLAY_OPTIONS,NAME_INPUT:'.'+CSS.NAME_INPUT,TITLE_INPUT:'.'+CSS.TITLE_INPUT,URL_INPUT:'.'+CSS.URL_INPUT,POSTER_SIZE:'.'+CSS.POSTER_SIZE,LINK_SIZE:'.'+CSS.LINK_SIZE,WIDTH_INPUT:'.'+CSS.WIDTH_INPUT,HEIGHT_INPUT:'.'+CSS.HEIGHT_INPUT,MINUTE_INPUT:'.'+CSS.MINUTE_INPUT,SECOND_INPUT:'.'+CSS.SECOND_INPUT,TRACK_KIND_INPUT:'.'+CSS.TRACK_KIND_INPUT,TRACK_LABEL_INPUT:'.'+CSS.TRACK_LABEL_INPUT,TRACK_LANG_INPUT:'.'+CSS.TRACK_LANG_INPUT,TRACK_DEFAULT_SELECT:'.'+CSS.TRACK_DEFAULT_SELECT,MEDIA_CONTROLS_TOGGLE:'.'+CSS.MEDIA_CONTROLS_TOGGLE,MEDIA_AUTOPLAY_TOGGLE:'.'+CSS.MEDIA_AUTOPLAY_TOGGLE,MEDIA_MUTE_TOGGLE:'.'+CSS.MEDIA_MUTE_TOGGLE,MEDIA_LOOP_TOGGLE:'.'+CSS.MEDIA_LOOP_TOGGLE,ADVANCED_SETTINGS:'.'+CSS.ADVANCED_SETTINGS,QUESTIONS:'.'+CSS.QUESTIONS,LINK_TAB:'li[data-medium-type="'+CSS.LINK+'"]',LINK_PANE:'.tab-pane[data-medium-type="'+CSS.LINK+'"]',VIDEO_TAB:'li[data-medium-type="'+CSS.VIDEO+'"]',VIDEO_PANE:'.tab-pane[data-medium-type="'+CSS.VIDEO+'"]',AUDIO_TAB:'li[data-medium-type="'+CSS.AUDIO+'"]',AUDIO_PANE:'.tab-pane[data-medium-type="'+CSS.AUDIO+'"]',TRACK_SUBTITLES_TAB:'li[data-track-kind="'+CSS.TRACK_SUBTITLES+'"]',TRACK_SUBTITLES_PANE:'.tab-pane[data-track-kind="'+CSS.TRACK_SUBTITLES+'"]',TRACK_CAPTIONS_TAB:'li[data-track-kind="'+CSS.TRACK_CAPTIONS+'"]',TRACK_CAPTIONS_PANE:'.tab-pane[data-track-kind="'+CSS.TRACK_CAPTIONS+'"]',TRACK_DESCRIPTIONS_TAB:'li[data-track-kind="'+CSS.TRACK_DESCRIPTIONS+'"]',TRACK_DESCRIPTIONS_PANE:'.tab-pane[data-track-kind="'+CSS.TRACK_DESCRIPTIONS+'"]',TRACK_CHAPTERS_TAB:'li[data-track-kind="'+CSS.TRACK_CHAPTERS+'"]',TRACK_CHAPTERS_PANE:'.tab-pane[data-track-kind="'+CSS.TRACK_CHAPTERS+'"]',TRACK_METADATA_TAB:'li[data-track-kind="'+CSS.TRACK_METADATA+'"]',TRACK_METADATA_PANE:'.tab-pane[data-track-kind="'+CSS.TRACK_METADATA+'"]'},TEMPLATES={ROOT:''+'<form class="mform atto_form atto_media" id="{{elementid}}_atto_media_form">'+'<ul class="root nav nav-tabs mb-1" role="tablist">'+'<li data-medium-type="{{CSS.LINK}}" class="nav-item">'+'<a class="nav-link active" href="#{{elementid}}_{{CSS.LINK}}" role="tab" data-toggle="tab">'+'{{get_string "link" component}}'+'</a>'+'</li>'+'<li data-medium-type="{{CSS.VIDEO}}" class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{CSS.VIDEO}}" role="tab" data-toggle="tab">'+'{{get_string "video" component}}'+'</a>'+'</li>'+'<li data-medium-type="{{CSS.AUDIO}}" class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{CSS.AUDIO}}" role="tab" data-toggle="tab">'+'{{get_string "audio" component}}'+'</a>'+'</li>'+'</ul>'+'<div class="root tab-content">'+'<div data-medium-type="{{CSS.LINK}}" class="tab-pane active" id="{{elementid}}_{{CSS.LINK}}">'+'{{> tab_panes.link}}'+'</div>'+'<div data-medium-type="{{CSS.VIDEO}}" class="tab-pane" id="{{elementid}}_{{CSS.VIDEO}}">'+'{{> tab_panes.video}}'+'</div>'+'<div data-medium-type="{{CSS.AUDIO}}" class="tab-pane" id="{{elementid}}_{{CSS.AUDIO}}">'+'{{> tab_panes.audio}}'+'</div>'+'</div>'+'<div class="mdl-align">'+'<br/>'+'<button class="btn btn-secondary submit" type="submit">{{get_string "createmedia" component}}</button>'+'</div>'+'</form>',TAB_PANES:{LINK:''+'{{renderPartial "form_components.source" context=this id=CSS.LINK_SOURCE}}'+'<label for="{{elementid}}_link_nameentry">{{get_string "entername" component}}</label>'+'<input class="form-control fullwidth {{CSS.NAME_INPUT}}" type="text" id="{{elementid}}_link_nameentry"'+'size="32" required="true"/>',VIDEO:''+'{{renderPartial "form_components.source" context=this id=CSS.MEDIA_SOURCE entersourcelabel="videosourcelabel"'+' addcomponentlabel="addsource" multisource="true" addsourcehelp=helpStrings.addsource}}'+'<fieldset class="collapsible collapsed" id="{{elementid}}_video-display-options">'+'<input name="mform_isexpanded_{{elementid}}_video-display-options" type="hidden">'+'<legend class="ftoggler">{{get_string "displayoptions" component}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.display_options" context=this id=CSS.VIDEO mediatype_video=true}}'+'</div>'+'</fieldset>'+'<fieldset class="collapsible collapsed" id="{{elementid}}_video-advanced-settings">'+'<input name="mform_isexpanded_{{elementid}}_video-advanced-settings" type="hidden">'+'<legend class="ftoggler">{{get_string "advancedsettings" component}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.advanced_settings" context=this id=CSS.VIDEO}}'+'</div>'+'</fieldset>'+'<fieldset class="collapsible collapsed" id="{{elementid}}_video-questions">'+'<input name="mform_isexpanded_{{elementid}}_video-questions" type="hidden">'+'<legend class="ftoggler">Questions</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.questions" context=this id=CSS.VIDEO}}'+'</div>'+'</fieldset>'+'<fieldset class="collapsible collapsed" id="{{elementid}}_video-tracks">'+'<input name="mform_isexpanded_{{elementid}}_video-tracks" type="hidden">'+'<legend class="ftoggler">{{get_string "tracks" component}} {{{helpStrings.tracks}}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.track_tabs" context=this id=CSS.VIDEO}}'+'</div>'+'</fieldset>',AUDIO:''+'{{renderPartial "form_components.source" context=this id=CSS.MEDIA_SOURCE entersourcelabel="audiosourcelabel"'+' addcomponentlabel="addsource" multisource="true" addsourcehelp=helpStrings.addsource}}'+'<fieldset class="collapsible collapsed" id="{{elementid}}_audio-display-options">'+'<input name="mform_isexpanded_{{elementid}}_audio-display-options" type="hidden">'+'<legend class="ftoggler">{{get_string "displayoptions" component}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.display_options" context=this id=CSS.AUDIO}}'+'</div>'+'</fieldset>'+'<fieldset class="collapsible collapsed" id="{{elementid}}_audio-advanced-settings">'+'<input name="mform_isexpanded_{{elementid}}_audio-advanced-settings" type="hidden">'+'<legend class="ftoggler">{{get_string "advancedsettings" component}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.advanced_settings" context=this id=CSS.AUDIO}}'+'</div>'+'</fieldset>'+'<fieldset class="collapsible collapsed" id="{{elementid}}_audio-tracks">'+'<input name="mform_isexpanded_{{elementid}}_audio-tracks" type="hidden">'+'<legend class="ftoggler">{{get_string "tracks" component}} {{{helpStrings.tracks}}}</legend>'+'<div class="fcontainer">'+'{{renderPartial "form_components.track_tabs" context=this id=CSS.AUDIO}}'+'</div>'+'</fieldset>'},FORM_COMPONENTS:{SOURCE:''+'<div class="{{CSS.SOURCE}} {{id}}">'+'<div class="mb-1">'+'<label for="url-input">'+'{{#entersourcelabel}}{{get_string ../entersourcelabel ../component}}{{/entersourcelabel}}'+'{{^entersourcelabel}}{{get_string "entersource" ../component}}{{/entersourcelabel}}'+'</label>'+'<div class="input-group input-append w-100">'+'<input id="url-input" class="form-control {{CSS.URL_INPUT}}" type="url" size="32"/>'+'<span class="input-group-append">'+'<button class="btn btn-secondary openmediabrowser" type="button">'+'{{get_string "browserepositories" component}}</button>'+'</span>'+'</div>'+'</div>'+'{{#multisource}}'+'{{renderPartial "form_components.add_component" context=../this label=../addcomponentlabel '+' help=../addsourcehelp}}'+'{{/multisource}}'+'</div>',ADD_COMPONENT:''+'<div>'+'<a href="#" class="addcomponent">'+'{{#label}}{{get_string ../label ../component}}{{/label}}'+'{{^label}}{{get_string "add" ../component}}{{/label}}'+'</a>'+'{{#help}}{{{../help}}}{{/help}}'+'</div>',REMOVE_COMPONENT:''+'<div>'+'<a href="#" class="removecomponent">'+'{{#label}}{{get_string ../label ../component}}{{/label}}'+'{{^label}}{{get_string "remove" ../component}}{{/label}}'+'</a>'+'</div>',DISPLAY_OPTIONS:''+'<div class="{{CSS.DISPLAY_OPTIONS}}">'+'<div class="mb-1">'+'<label for="{{id}}_media-title-entry">{{get_string "entertitle" component}}</label>'+'<input class="form-control fullwidth {{CSS.TITLE_INPUT}}" type="text" id="{{id}}_media-title-entry"'+'size="32"/>'+'</div>'+'<div class="clearfix"></div>'+'{{#mediatype_video}}'+'<div class="mb-1">'+'<label>{{get_string "size" component}}</label>'+'<div class="form-inline {{CSS.POSTER_SIZE}}">'+'<label class="accesshide">{{get_string "videowidth" component}}</label>'+'<input type="text" class="form-control mr-1 {{CSS.WIDTH_INPUT}} input-mini" size="4"/>'+' x '+'<label class="accesshide">{{get_string "videoheight" component}}</label>'+'<input type="text" class="form-control ml-1 {{CSS.HEIGHT_INPUT}} input-mini" size="4"/>'+'</div>'+'</div>'+'<div class="clearfix"></div>'+'{{renderPartial "form_components.source" context=this id=CSS.POSTER_SOURCE entersourcelabel="poster"}}'+'{{/mediatype_video}}'+'<div>',QUESTIONS:''+'<div class="{{CSS.QUESTIONS_CLASS}}">'+'<div class="mb-1">'+'<label for="{{id}}_media-questions">Enter your question: </label>'+'<textarea class="form-control fullwidth {{CSS.QUESTIONS}}" id="{{id}}_media-questions"'+'size="125"></textarea>'+'</div>'+'<div class="mb-1">'+'<label>Time to place question at</label>'+'<div class="form-inline {{CSS.POSTER_SIZE}}">'+'<label class="accesshide">{{get_string "videowidth" component}}</label>'+'<input type="text" class="form-control mr-1 {{CSS.MINUTE_INPUT}} input-mini" size="2"/>'+':'+'<label class="accesshide">{{get_string "videoheight" component}}</label>'+'<input type="text" class="form-control ml-1 {{CSS.SECOND_INPUT}} input-mini" size="2"/>'+'</div>'+'</div>'+'<div class="clearfix"></div>'+'<div>',ADVANCED_SETTINGS:''+'<div class="{{CSS.ADVANCED_SETTINGS}}">'+'<div class="form-check">'+'<input type="checkbox" checked="true" class="form-check-input {{CSS.MEDIA_CONTROLS_TOGGLE}}"'+'id="{{id}}_media-controls-toggle"/>'+'<label class="form-check-label" for="{{id}}_media-controls-toggle">'+'{{get_string "controls" component}}'+'</label>'+'</div>'+'<div class="form-check">'+'<input type="checkbox" class="form-check-input {{CSS.MEDIA_AUTOPLAY_TOGGLE}}"'+'id="{{id}}_media-autoplay-toggle"/>'+'<label class="form-check-label" for="{{id}}_media-autoplay-toggle">'+'{{get_string "autoplay" component}}'+'</label>'+'</div>'+'<div class="form-check">'+'<input type="checkbox" class="form-check-input {{CSS.MEDIA_MUTE_TOGGLE}}" '+'id="{{id}}_media-mute-toggle"/>'+'<label class="form-check-label" for="{{id}}_media-mute-toggle">'+'{{get_string "mute" component}}'+'</label>'+'</div>'+'<div class="form-check">'+'<input type="checkbox" class="form-check-input {{CSS.MEDIA_LOOP_TOGGLE}}" '+'id="{{id}}_media-loop-toggle"/>'+'<label class="form-check-label" for="{{id}}_media-loop-toggle">'+'{{get_string "loop" component}}'+'</label>'+'</div>'+'</div>',TRACK_TABS:''+'<ul class="nav nav-tabs mb-3">'+'<li data-track-kind="{{CSS.TRACK_SUBTITLES}}" class="nav-item">'+'<a class="nav-link active" href="#{{elementid}}_{{id}}_{{CSS.TRACK_SUBTITLES}}"'+' role="tab" data-toggle="tab">'+'{{get_string "subtitles" component}}'+'</a>'+'</li>'+'<li data-track-kind="{{CSS.TRACK_CAPTIONS}}" class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{id}}_{{CSS.TRACK_CAPTIONS}}" role="tab" data-toggle="tab">'+'{{get_string "captions" component}}'+'</a>'+'</li>'+'<li data-track-kind="{{CSS.TRACK_DESCRIPTIONS}}"  class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{id}}_{{CSS.TRACK_DESCRIPTIONS}}"'+' role="tab" data-toggle="tab">'+'{{get_string "descriptions" component}}'+'</a>'+'</li>'+'<li data-track-kind="{{CSS.TRACK_CHAPTERS}}" class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{id}}_{{CSS.TRACK_CHAPTERS}}" role="tab" data-toggle="tab">'+'{{get_string "chapters" component}}'+'</a>'+'</li>'+'<li data-track-kind="{{CSS.TRACK_METADATA}}" class="nav-item">'+'<a class="nav-link" href="#{{elementid}}_{{id}}_{{CSS.TRACK_METADATA}}" role="tab" data-toggle="tab">'+'{{get_string "metadata" component}}'+'</a>'+'</li>'+'</ul>'+'<div class="tab-content">'+'<div data-track-kind="{{CSS.TRACK_SUBTITLES}}" class="tab-pane active"'+' id="{{elementid}}_{{id}}_{{CSS.TRACK_SUBTITLES}}">'+'<div class="trackhelp">{{{helpStrings.subtitles}}}</div>'+'{{renderPartial "form_components.track" context=this sourcelabel="subtitlessourcelabel"'+' addcomponentlabel="addsubtitlestrack"}}'+'</div>'+'<div data-track-kind="{{CSS.TRACK_CAPTIONS}}" class="tab-pane"'+' id="{{elementid}}_{{id}}_{{CSS.TRACK_CAPTIONS}}">'+'<div class="trackhelp">{{{helpStrings.captions}}}</div>'+'{{renderPartial "form_components.track" context=this sourcelabel="captionssourcelabel"'+' addcomponentlabel="addcaptionstrack"}}'+'</div>'+'<div data-track-kind="{{CSS.TRACK_DESCRIPTIONS}}" class="tab-pane"'+' id="{{elementid}}_{{id}}_{{CSS.TRACK_DESCRIPTIONS}}">'+'<div class="trackhelp">{{{helpStrings.descriptions}}}</div>'+'{{renderPartial "form_components.track" context=this sourcelabel="descriptionssourcelabel"'+' addcomponentlabel="adddescriptionstrack"}}'+'</div>'+'<div data-track-kind="{{CSS.TRACK_CHAPTERS}}" class="tab-pane"'+' id="{{elementid}}_{{id}}_{{CSS.TRACK_CHAPTERS}}">'+'<div class="trackhelp">{{{helpStrings.chapters}}}</div>'+'{{renderPartial "form_components.track" context=this sourcelabel="chapterssourcelabel"'+' addcomponentlabel="addchapterstrack"}}'+'</div>'+'<div data-track-kind="{{CSS.TRACK_METADATA}}" class="tab-pane"'+' id="{{elementid}}_{{id}}_{{CSS.TRACK_METADATA}}">'+'<div class="trackhelp">{{{helpStrings.metadata}}}</div>'+'{{renderPartial "form_components.track" context=this sourcelabel="metadatasourcelabel"'+' addcomponentlabel="addmetadatatrack"}}'+'</div>'+'</div>',TRACK:''+'<div class="mb-1 {{CSS.TRACK}}">'+'{{renderPartial "form_components.source" context=this id=CSS.TRACK_SOURCE entersourcelabel=sourcelabel}}'+'<div class="form-group">'+'<label class="w-100" for="lang-input">{{get_string "srclang" component}}</label>'+'<select id="lang-input" class="custom-select {{CSS.TRACK_LANG_INPUT}}">'+'<optgroup label="{{get_string "languagesinstalled" component}}">'+'{{#langsinstalled}}'+'<option value="{{code}}" {{#default}}selected="selected"{{/default}}>{{lang}}</option>'+'{{/langsinstalled}}'+'</optgroup>'+'<optgroup label="{{get_string "languagesavailable" component}} ">'+'{{#langsavailable}}<option value="{{code}}">{{lang}}</option>{{/langsavailable}}'+'</optgroup>'+'</select>'+'</div>'+'<div class="form-group">'+'<label class="w-100" for="track-input">{{get_string "label" component}}</label>'+'<input id="track-input" class="form-control {{CSS.TRACK_LABEL_INPUT}}" type="text"/>'+'</div>'+'<div class="form-check">'+'<input type="checkbox" class="form-check-input {{CSS.TRACK_DEFAULT_SELECT}}"/>'+'<label class="form-check-label">{{get_string "default" component}}</label>'+'</div>'+'{{renderPartial "form_components.add_component" context=this label=addcomponentlabel}}'+'</div>'},HTML_MEDIA:{VIDEO:''+'<div style=float:left;width:100%;max-width:100%>'+'<script src="https://vjs.zencdn.net/7.8.4/video.js"></script>'+'&nbsp;<video '+'class="video-js"'+'{{#width}}width="{{../width}}" {{/width}}'+'{{#height}}height="{{../height}}" {{/height}}'+'{{#poster}}poster="{{../poster}}" {{/poster}}'+'{{#showControls}}controls="true" {{/showControls}}'+'{{#loop}}loop="true" {{/loop}}'+'{{#muted}}muted="true" {{/muted}}'+'{{#autoplay}}autoplay="true" {{/autoplay}}'+'{{#title}}title="{{../title}}" {{/title}}'+'>'+'{{#sources}}<source src="{{source}}">{{/sources}}'+'{{#tracks}}'+'<track src="{{track}}" kind="{{kind}}" srclang="{{srclang}}" label="{{label}}"'+' {{#defaultTrack}}default="true"{{/defaultTrack}}>'+'{{/tracks}}'+'{{#description}}{{../description}}{{/description}}'+'</video>&nbsp'+'</div>'+'{{#questions}}'+'<div id=media_question data-question= \'{{../questions}}\'</div> {{/questions}}'+'{{#minute}} <div id=media_minute data-minute =\'{{../minute}}\' </div>{{/minute}} '+'{{#second}} <div id=media_second data-second =\'{{../second}}\' </div> {{/second}}'+'<script> src=\'https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\'></script>'+'<script>'+'var checkExist = setInterval(function() {'+'var doc = document.getElementsByClassName("video-js")[0];'+'if (videojs.getPlayer(doc.id).id_.length > 0) {'+'execute();'+'clearInterval(checkExist);'+'}'+'}, 100);'+'function execute() {'+'var box = document.querySelector(\'[style="max-width:400px;"]\');'+'box.style["max-width"] = "75%";'+'var cls = document.getElementById(\'page-mod-page-view\') || document.getElementById(\'page-mod-assign-view\');'+'cls = cls.className;'+'var t = cls.split(\' \').find(el => el.substring(0, 4) === \'cmid\');'+'cls = parseInt(t.substring(t.indexOf(\'-\') + 1));'+'var doc = document.getElementsByClassName("video-js")[0];'+'var myPlayer = videojs.getPlayer(doc.id);'+'myPlayer.fluid(true);'+'var title = doc.title;'+'var furthestwatched = 0;'+'var played = 0;'+'var watched = new Boolean(false);'+'myPlayer.ready(function() {'+'var q= document.getElementById(\'media_question\');'+'if (q){'+'this.on(\'timeupdate\', addQuestion);'+'this.on(\'seeked\', function(){ myPlayer.pause(); addQuestion(); });'+'function addQuestion() {'+'var minutes = document.getElementById(\'media_minute\');'+'var seconds = document.getElementById(\'media_second\');'+'if(minutes){ minutes= parseInt(minutes.getAttribute(\'data-minute\') || 0);}'+'else{ minutes = 0;}'+'if(seconds){ seconds = parseInt(seconds.getAttribute(\'data-second\') || 0);}'+'else{ seconds = 0;}'+'seconds = (minutes * 60) + seconds;'+'if (this.currentTime() > seconds && watched == false) {'+'watched = new Boolean(true);'+'myPlayer.pause();'+'var player = this, options ={};'+'options.content = \'In the  modal\';'+'options.label = \'the label\';'+'var width = Math.round(myPlayer.currentWidth() * 0.5) + "px";'+'var height = Math.round(myPlayer.currentHeight() * 0.5) + "px";'+'var newElement = document.createElement(\'div\');'+'var question = q.getAttribute(\'data-question\');'+'newElement.innerHTML = "<form> <label style=\'font-size:3em;\' for=\'response_text\'>" + question + ":'+'</label><br><textarea style=\'border-radius:12px; width:" + width + "; height:" + height + "; font-size:2em;\''+'id=\'response_text\' name=\'response_text\' rows=\'6\' cols=\'50\'></textarea><br><br><input type=\'submit\''+'style=\'border-radius:8px; font-size:2.5em;\'  value=\'Submit your response\'></form>";'+'options.content = newElement;'+'var ModalDialog = videojs.getComponent(\'ModalDialog\');'+'var myModal = new ModalDialog(player, options);'+'player.addChild(myModal);'+'myModal.open();'+'myModal.on(\'modalclose\', function() {'+'myPlayer.play();'+'});'+'$(\'form\').submit(function(event) {'+'console.log("Form Submitted!");'+'var resp = $(\'textarea[name=response_text]\').val();'+'require([\'core/ajax\'],'+'function(ajax) {'+'ajax.call([{'+'methodname: \'mod_page_submit_video_response\','+'method: \'POST\','+'args: {'+'pageid: cls,'+''+'videoid: title,'+'videoresponse: resp'+'},'+'done: console.log("recorded video response."),'+'fail: console.log(""),'+'}]);'+'});'+'myModal.close();'+'event.preventDefault();'+'});'+'} else {}'+'}'+'}'+'this.on(\'pause\', function() {'+'console.log(\'paused\');'+'if (myPlayer.played().length > played) {'+'var thisstart = Math.round(myPlayer.played().start(played));'+'var thisend = Math.round(myPlayer.played().end(played));'+'if (thisstart == thisend) {'+'return;}'+'played++;'+'furthestwatched = thisend;'+'} else {'+'var thisstart = furthestwatched;'+'var thisend = Math.round(myPlayer.played().end(played - 1));'+'if (thisstart == thisend) {'+'return;'+'}'+'furthestwatched = thisend;'+'}'+'require([\'core/ajax\'],'+'function(ajax) {'+'ajax.call([{'+'methodname: \'mod_page_view_video\','+'method: \'POST\','+'args: {'+'pageid: cls,'+'videoid: title,'+'thisstart: thisstart,'+'thisend: thisend'+'},'+'done: console.log(\'logged latest watch\'),'+'fail: console.log(\'\'),'+'}]);'+'});'+'})'+'});'+'}'+'</script>'+'</div>',AUDIO:''+'&nbsp;<audio '+'{{#showControls}}controls="true" {{/showControls}}'+'{{#loop}}loop="true" {{/loop}}'+'{{#muted}}muted="true" {{/muted}}'+'{{#autoplay}}autoplay="true" {{/autoplay}}'+'{{#title}}title="{{../title}}" {{/title}}'+'>'+'{{#sources}}<source src="{{source}}">{{/sources}}'+'{{#tracks}}'+'<track src="{{track}}" kind="{{kind}}" srclang="{{srclang}}" label="{{label}}"'+' {{#defaultTrack}}default="true"{{/defaultTrack}}>'+'{{/tracks}}'+'{{#description}}{{../description}}{{/description}}'+'</audio>&nbsp',LINK:''+'<a href="{{url}}" '+'{{#width}}data-width="{{../width}}" {{/width}}'+'{{#height}}data-height="{{../height}}"{{/height}}'+'>{{#name}}{{../name}}{{/name}}{{^name}}{{../url}}{{/name}}</a>'}};__cov_rE9vzJ60_FO4xOugmxKTkg.s['3']++;Y.namespace('M.atto_media').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{initializer:function(){__cov_rE9vzJ60_FO4xOugmxKTkg.f['2']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['4']++;if(this.get('host').canShowFilepicker('media')){__cov_rE9vzJ60_FO4xOugmxKTkg.b['1'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['5']++;this.editor.delegate('dblclick',this._displayDialogue,'video',this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['6']++;this.editor.delegate('click',this._handleClick,'video',this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['7']++;this.addButton({icon:'e/insert_edit_video',callback:this._displayDialogue,tags:'video, audio',tagMatchRequiresAll:false});}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['1'][1]++;}},_getContext:function(extra){__cov_rE9vzJ60_FO4xOugmxKTkg.f['3']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['8']++;return Y.merge({elementid:this.get('host').get('elementid'),component:COMPONENTNAME,langsinstalled:this.get('langs').installed,langsavailable:this.get('langs').available,helpStrings:this.get('help'),CSS:CSS},extra);},_handleClick:function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['4']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['9']++;var medium=e.target;__cov_rE9vzJ60_FO4xOugmxKTkg.s['10']++;var selection=this.get('host').getSelectionFromNode(medium);__cov_rE9vzJ60_FO4xOugmxKTkg.s['11']++;if(this.get('host').getSelection()!==selection){__cov_rE9vzJ60_FO4xOugmxKTkg.b['2'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['12']++;this.get('host').setSelection(selection);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['2'][1]++;}},_displayDialogue:function(){__cov_rE9vzJ60_FO4xOugmxKTkg.f['5']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['13']++;if(this.get('host').getSelection()===false){__cov_rE9vzJ60_FO4xOugmxKTkg.b['3'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['14']++;return;}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['3'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['15']++;if(!('renderPartial'in Y.Handlebars.helpers)){__cov_rE9vzJ60_FO4xOugmxKTkg.b['4'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['16']++;(function smashPartials(chain,obj){__cov_rE9vzJ60_FO4xOugmxKTkg.f['6']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['17']++;Y.each(obj,function(value,index){__cov_rE9vzJ60_FO4xOugmxKTkg.f['7']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['18']++;chain.push(index);__cov_rE9vzJ60_FO4xOugmxKTkg.s['19']++;if(typeof value!=='object'){__cov_rE9vzJ60_FO4xOugmxKTkg.b['5'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['20']++;Y.Handlebars.registerPartial(chain.join('.').toLowerCase(),value);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['5'][1]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['21']++;smashPartials(chain,value);}__cov_rE9vzJ60_FO4xOugmxKTkg.s['22']++;chain.pop();});}([],TEMPLATES));__cov_rE9vzJ60_FO4xOugmxKTkg.s['23']++;Y.Handlebars.registerHelper('renderPartial',function(partialName,options){__cov_rE9vzJ60_FO4xOugmxKTkg.f['8']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['24']++;if(!partialName){__cov_rE9vzJ60_FO4xOugmxKTkg.b['6'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['25']++;return'';}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['6'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['26']++;var partial=Y.Handlebars.partials[partialName];__cov_rE9vzJ60_FO4xOugmxKTkg.s['27']++;var parentContext=options.hash.context?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['7'][0]++,Y.clone(options.hash.context)):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['7'][1]++,{});__cov_rE9vzJ60_FO4xOugmxKTkg.s['28']++;var context=Y.merge(parentContext,options.hash);__cov_rE9vzJ60_FO4xOugmxKTkg.s['29']++;delete context.context;__cov_rE9vzJ60_FO4xOugmxKTkg.s['30']++;if(!partial){__cov_rE9vzJ60_FO4xOugmxKTkg.b['8'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['31']++;return'';}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['8'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['32']++;return new Y.Handlebars.SafeString(Y.Handlebars.compile(partial)(context));});}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['4'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['33']++;var dialogue=this.getDialogue({headerContent:M.util.get_string('createmedia',COMPONENTNAME),focusAfterHide:true,width:660,focusOnShowSelector:SELECTORS.URL_INPUT});__cov_rE9vzJ60_FO4xOugmxKTkg.s['34']++;dialogue.set('bodyContent',this._getDialogueContent(this.get('host').getSelection())).show();__cov_rE9vzJ60_FO4xOugmxKTkg.s['35']++;M.form.shortforms({formid:this.get('host').get('elementid')+'_atto_media_form'});},_getDialogueContent:function(selection){__cov_rE9vzJ60_FO4xOugmxKTkg.f['9']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['36']++;var content=Y.Node.create(Y.Handlebars.compile(TEMPLATES.ROOT)(this._getContext()));__cov_rE9vzJ60_FO4xOugmxKTkg.s['37']++;var medium=this.get('host').getSelectedNodes().filter('video,audio').shift();__cov_rE9vzJ60_FO4xOugmxKTkg.s['38']++;var mediumProperties=medium?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['9'][0]++,this._getMediumProperties(medium)):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['9'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['39']++;return this._attachEvents(this._applyMediumProperties(content,mediumProperties),selection);},_attachEvents:function(content,selection){__cov_rE9vzJ60_FO4xOugmxKTkg.f['10']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['40']++;content.delegate('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['11']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['41']++;e.preventDefault();__cov_rE9vzJ60_FO4xOugmxKTkg.s['42']++;this._addMediaSourceComponent(e.currentTarget);},SELECTORS.MEDIA_SOURCE+' .addcomponent',this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['43']++;content.delegate('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['12']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['44']++;e.preventDefault();__cov_rE9vzJ60_FO4xOugmxKTkg.s['45']++;this._addTrackComponent(e.currentTarget);},SELECTORS.TRACK+' .addcomponent',this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['46']++;content.delegate('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['13']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['47']++;var element=e.currentTarget;__cov_rE9vzJ60_FO4xOugmxKTkg.s['48']++;if(element.get('checked')){__cov_rE9vzJ60_FO4xOugmxKTkg.b['10'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['49']++;var getKind=function(el){__cov_rE9vzJ60_FO4xOugmxKTkg.f['14']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['50']++;return this._getTrackTypeFromTabPane(el.ancestor('.tab-pane'));}.bind(this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['51']++;element.ancestor('.root.tab-content').all(SELECTORS.TRACK_DEFAULT_SELECT).each(function(select){__cov_rE9vzJ60_FO4xOugmxKTkg.f['15']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['52']++;if((__cov_rE9vzJ60_FO4xOugmxKTkg.b['12'][0]++,select!==element)&&(__cov_rE9vzJ60_FO4xOugmxKTkg.b['12'][1]++,getKind(element)===getKind(select))){__cov_rE9vzJ60_FO4xOugmxKTkg.b['11'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['53']++;select.set('checked',false);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['11'][1]++;}});}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['10'][1]++;}},SELECTORS.TRACK_DEFAULT_SELECT,this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['54']++;content.delegate('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['16']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['55']++;var element=e.currentTarget;__cov_rE9vzJ60_FO4xOugmxKTkg.s['56']++;var fptype=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['13'][0]++,element.ancestor(SELECTORS.POSTER_SOURCE))&&(__cov_rE9vzJ60_FO4xOugmxKTkg.b['13'][1]++,'image')||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['13'][2]++,element.ancestor(SELECTORS.TRACK_SOURCE))&&(__cov_rE9vzJ60_FO4xOugmxKTkg.b['13'][3]++,'subtitle')||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['13'][4]++,'media');__cov_rE9vzJ60_FO4xOugmxKTkg.s['57']++;e.preventDefault();__cov_rE9vzJ60_FO4xOugmxKTkg.s['58']++;this.get('host').showFilepicker(fptype,this._getFilepickerCallback(element,fptype),this);},'.openmediabrowser',this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['59']++;content.all('.nav-item').on('click',function(elem){__cov_rE9vzJ60_FO4xOugmxKTkg.f['17']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['60']++;elem.currentTarget.get('parentNode').all('.active').removeClass('active');});__cov_rE9vzJ60_FO4xOugmxKTkg.s['61']++;content.one('.submit').on('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['18']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['62']++;e.preventDefault();__cov_rE9vzJ60_FO4xOugmxKTkg.s['63']++;var mediaHTML=this._getMediaHTML(e.currentTarget.ancestor('.atto_form')),host=this.get('host');__cov_rE9vzJ60_FO4xOugmxKTkg.s['64']++;this.getDialogue({focusAfterHide:null}).hide();__cov_rE9vzJ60_FO4xOugmxKTkg.s['65']++;if(mediaHTML){__cov_rE9vzJ60_FO4xOugmxKTkg.b['14'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['66']++;host.setSelection(selection);__cov_rE9vzJ60_FO4xOugmxKTkg.s['67']++;host.insertContentAtFocusPoint(mediaHTML);__cov_rE9vzJ60_FO4xOugmxKTkg.s['68']++;this.markUpdated();}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['14'][1]++;}},this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['69']++;return content;},_applyMediumProperties:function(content,properties){__cov_rE9vzJ60_FO4xOugmxKTkg.f['19']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['70']++;if(!properties){__cov_rE9vzJ60_FO4xOugmxKTkg.b['15'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['71']++;return content;}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['15'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['72']++;var applyTrackProperties=function(track,properties){__cov_rE9vzJ60_FO4xOugmxKTkg.f['20']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['73']++;track.one(SELECTORS.TRACK_SOURCE+' '+SELECTORS.URL_INPUT).set('value',properties.src);__cov_rE9vzJ60_FO4xOugmxKTkg.s['74']++;track.one(SELECTORS.TRACK_LANG_INPUT).set('value',properties.srclang);__cov_rE9vzJ60_FO4xOugmxKTkg.s['75']++;track.one(SELECTORS.TRACK_LABEL_INPUT).set('value',properties.label);__cov_rE9vzJ60_FO4xOugmxKTkg.s['76']++;track.one(SELECTORS.TRACK_DEFAULT_SELECT).set('checked',properties.defaultTrack);};__cov_rE9vzJ60_FO4xOugmxKTkg.s['77']++;var tabPane=content.one('.root.tab-content > .tab-pane#'+this.get('host').get('elementid')+'_'+properties.type.toLowerCase());__cov_rE9vzJ60_FO4xOugmxKTkg.s['78']++;tabPane.one(SELECTORS.MEDIA_SOURCE+' '+SELECTORS.URL_INPUT).set('value',properties.sources[0]);__cov_rE9vzJ60_FO4xOugmxKTkg.s['79']++;Y.Array.each(properties.sources.slice(1),function(source){__cov_rE9vzJ60_FO4xOugmxKTkg.f['21']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['80']++;this._addMediaSourceComponent(tabPane.one(SELECTORS.MEDIA_SOURCE+' .addcomponent'),function(newComponent){__cov_rE9vzJ60_FO4xOugmxKTkg.f['22']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['81']++;newComponent.one(SELECTORS.URL_INPUT).set('value',source);});},this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['82']++;Y.Object.each(properties.tracks,function(value,key){__cov_rE9vzJ60_FO4xOugmxKTkg.f['23']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['83']++;var trackData=value.length?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['16'][0]++,value):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['16'][1]++,[{src:'',srclang:'',label:'',defaultTrack:false}]);__cov_rE9vzJ60_FO4xOugmxKTkg.s['84']++;var paneSelector=SELECTORS['TRACK_'+key.toUpperCase()+'_PANE'];__cov_rE9vzJ60_FO4xOugmxKTkg.s['85']++;applyTrackProperties(tabPane.one(paneSelector+' '+SELECTORS.TRACK),trackData[0]);__cov_rE9vzJ60_FO4xOugmxKTkg.s['86']++;Y.Array.each(trackData.slice(1),function(track){__cov_rE9vzJ60_FO4xOugmxKTkg.f['24']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['87']++;this._addTrackComponent(tabPane.one(paneSelector+' '+SELECTORS.TRACK+' .addcomponent'),function(newComponent){__cov_rE9vzJ60_FO4xOugmxKTkg.f['25']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['88']++;applyTrackProperties(newComponent,track);});},this);},this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['89']++;tabPane.one(SELECTORS.TITLE_INPUT).set('value',properties.title);__cov_rE9vzJ60_FO4xOugmxKTkg.s['90']++;tabPane.one(SELECTORS.MEDIA_CONTROLS_TOGGLE).set('checked',properties.controls);__cov_rE9vzJ60_FO4xOugmxKTkg.s['91']++;tabPane.one(SELECTORS.MEDIA_AUTOPLAY_TOGGLE).set('checked',properties.autoplay);__cov_rE9vzJ60_FO4xOugmxKTkg.s['92']++;tabPane.one(SELECTORS.MEDIA_MUTE_TOGGLE).set('checked',properties.muted);__cov_rE9vzJ60_FO4xOugmxKTkg.s['93']++;tabPane.one(SELECTORS.MEDIA_LOOP_TOGGLE).set('checked',properties.loop);__cov_rE9vzJ60_FO4xOugmxKTkg.s['94']++;var mediumType=this._getMediumTypeFromTabPane(tabPane);__cov_rE9vzJ60_FO4xOugmxKTkg.s['95']++;if(mediumType==='video'){__cov_rE9vzJ60_FO4xOugmxKTkg.b['17'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['96']++;tabPane.one(SELECTORS.POSTER_SOURCE+' '+SELECTORS.URL_INPUT).setAttribute('value',properties.poster);__cov_rE9vzJ60_FO4xOugmxKTkg.s['97']++;tabPane.one(SELECTORS.WIDTH_INPUT).set('value',properties.width);__cov_rE9vzJ60_FO4xOugmxKTkg.s['98']++;tabPane.one(SELECTORS.HEIGHT_INPUT).set('value',properties.height);__cov_rE9vzJ60_FO4xOugmxKTkg.s['99']++;tabPane.one(SELECTORS.QUESTIONS).set('value',properties.questions);__cov_rE9vzJ60_FO4xOugmxKTkg.s['100']++;tabPane.one(SELECTORS.MINUTE_INPUT).set('value',properties.minute);__cov_rE9vzJ60_FO4xOugmxKTkg.s['101']++;tabPane.one(SELECTORS.SECOND_INPUT).set('value',properties.second);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['17'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['102']++;tabPane.siblings('.active').removeClass('active');__cov_rE9vzJ60_FO4xOugmxKTkg.s['103']++;content.all('.root.nav-tabs .nav-item a').removeClass('active');__cov_rE9vzJ60_FO4xOugmxKTkg.s['104']++;tabPane.addClass('active');__cov_rE9vzJ60_FO4xOugmxKTkg.s['105']++;content.one(SELECTORS[mediumType.toUpperCase()+'_TAB']+' a').addClass('active');__cov_rE9vzJ60_FO4xOugmxKTkg.s['106']++;return content;},_getMediumProperties:function(medium){__cov_rE9vzJ60_FO4xOugmxKTkg.f['26']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['107']++;var boolAttr=function(elem,attr){__cov_rE9vzJ60_FO4xOugmxKTkg.f['27']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['108']++;return(__cov_rE9vzJ60_FO4xOugmxKTkg.b['18'][0]++,elem.hasAttribute(attr))&&((__cov_rE9vzJ60_FO4xOugmxKTkg.b['18'][1]++,elem.getAttribute(attr))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['18'][2]++,elem.getAttribute(attr)===''));};__cov_rE9vzJ60_FO4xOugmxKTkg.s['109']++;var tracks={subtitles:[],captions:[],descriptions:[],chapters:[],metadata:[]};__cov_rE9vzJ60_FO4xOugmxKTkg.s['110']++;medium.all('track').each(function(track){__cov_rE9vzJ60_FO4xOugmxKTkg.f['28']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['111']++;tracks[track.getAttribute('kind')].push({src:track.getAttribute('src'),srclang:track.getAttribute('srclang'),label:track.getAttribute('label'),defaultTrack:boolAttr(track,'default')});});__cov_rE9vzJ60_FO4xOugmxKTkg.s['112']++;return{type:medium.test('video')?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['19'][0]++,MEDIA_TYPES.VIDEO):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['19'][1]++,MEDIA_TYPES.AUDIO),sources:medium.all('source').get('src'),poster:medium.getAttribute('poster'),title:medium.getAttribute('title'),width:medium.getAttribute('width'),height:medium.getAttribute('height'),questions:medium.getAttribute('questions'),minute:medium.getAttribute('minute'),second:medium.getAttribute('second'),autoplay:boolAttr(medium,'autoplay'),loop:boolAttr(medium,'loop'),muted:boolAttr(medium,'muted'),controls:boolAttr(medium,'controls'),tracks:tracks};},_addTrackComponent:function(element,callback){__cov_rE9vzJ60_FO4xOugmxKTkg.f['29']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['113']++;var trackType=this._getTrackTypeFromTabPane(element.ancestor('.tab-pane'));__cov_rE9vzJ60_FO4xOugmxKTkg.s['114']++;var context=this._getContext({sourcelabel:trackType+'sourcelabel',addcomponentlabel:'add'+trackType+'track'});__cov_rE9vzJ60_FO4xOugmxKTkg.s['115']++;this._addComponent(element,TEMPLATES.FORM_COMPONENTS.TRACK,SELECTORS.TRACK,context,callback);},_addMediaSourceComponent:function(element,callback){__cov_rE9vzJ60_FO4xOugmxKTkg.f['30']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['116']++;var mediumType=this._getMediumTypeFromTabPane(element.ancestor('.tab-pane'));__cov_rE9vzJ60_FO4xOugmxKTkg.s['117']++;var context=this._getContext({multisource:true,id:CSS.MEDIA_SOURCE,entersourcelabel:mediumType+'sourcelabel',addcomponentlabel:'addsource',addsourcehelp:this.get('help').addsource});__cov_rE9vzJ60_FO4xOugmxKTkg.s['118']++;this._addComponent(element,TEMPLATES.FORM_COMPONENTS.SOURCE,SELECTORS.MEDIA_SOURCE,context,callback);},_addComponent:function(element,component,ancestor,context,callback){__cov_rE9vzJ60_FO4xOugmxKTkg.f['31']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['119']++;var currentComponent=element.ancestor(ancestor),newComponent=Y.Node.create(Y.Handlebars.compile(component)(context)),removeNodeContext=this._getContext(context);__cov_rE9vzJ60_FO4xOugmxKTkg.s['120']++;removeNodeContext.label='remove';__cov_rE9vzJ60_FO4xOugmxKTkg.s['121']++;var removeNode=Y.Node.create(Y.Handlebars.compile(TEMPLATES.FORM_COMPONENTS.REMOVE_COMPONENT)(removeNodeContext));__cov_rE9vzJ60_FO4xOugmxKTkg.s['122']++;removeNode.one('.removecomponent').on('click',function(e){__cov_rE9vzJ60_FO4xOugmxKTkg.f['32']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['123']++;e.preventDefault();__cov_rE9vzJ60_FO4xOugmxKTkg.s['124']++;currentComponent.remove(true);});__cov_rE9vzJ60_FO4xOugmxKTkg.s['125']++;currentComponent.insert(newComponent,'after');__cov_rE9vzJ60_FO4xOugmxKTkg.s['126']++;element.ancestor().insert(removeNode,'after');__cov_rE9vzJ60_FO4xOugmxKTkg.s['127']++;element.ancestor().remove(true);__cov_rE9vzJ60_FO4xOugmxKTkg.s['128']++;if(callback){__cov_rE9vzJ60_FO4xOugmxKTkg.b['20'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['129']++;callback.call(this,newComponent);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['20'][1]++;}},_getFilepickerCallback:function(element,fptype){__cov_rE9vzJ60_FO4xOugmxKTkg.f['33']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['130']++;return function(params){__cov_rE9vzJ60_FO4xOugmxKTkg.f['34']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['131']++;if(params.url!==''){__cov_rE9vzJ60_FO4xOugmxKTkg.b['21'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['132']++;var tabPane=element.ancestor('.tab-pane');__cov_rE9vzJ60_FO4xOugmxKTkg.s['133']++;element.ancestor(SELECTORS.SOURCE).one(SELECTORS.URL_INPUT).set('value',params.url);__cov_rE9vzJ60_FO4xOugmxKTkg.s['134']++;if(tabPane.get('id')===this.get('host').get('elementid')+'_'+CSS.LINK){__cov_rE9vzJ60_FO4xOugmxKTkg.b['22'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['135']++;tabPane.one(SELECTORS.NAME_INPUT).set('value',params.file);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['22'][1]++;}__cov_rE9vzJ60_FO4xOugmxKTkg.s['136']++;if(fptype==='subtitle'){__cov_rE9vzJ60_FO4xOugmxKTkg.b['23'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['137']++;var subtitleLang=params.file.split('.vtt')[0].split('-').slice(-1)[0];__cov_rE9vzJ60_FO4xOugmxKTkg.s['138']++;var langObj=this.get('langs').available.reduce(function(carry,lang){__cov_rE9vzJ60_FO4xOugmxKTkg.f['35']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['139']++;return lang.code===subtitleLang?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['24'][0]++,lang):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['24'][1]++,carry);},false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['140']++;if(langObj){__cov_rE9vzJ60_FO4xOugmxKTkg.b['25'][0]++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['141']++;element.ancestor(SELECTORS.TRACK).one(SELECTORS.TRACK_LABEL_INPUT).set('value',langObj.lang.substr(0,langObj.lang.lastIndexOf(' ')));__cov_rE9vzJ60_FO4xOugmxKTkg.s['142']++;element.ancestor(SELECTORS.TRACK).one(SELECTORS.TRACK_LANG_INPUT).set('value',langObj.code);}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['25'][1]++;}}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['23'][1]++;}}else{__cov_rE9vzJ60_FO4xOugmxKTkg.b['21'][1]++;}};},_getMediumTypeFromTabPane:function(tabPane){__cov_rE9vzJ60_FO4xOugmxKTkg.f['36']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['143']++;return tabPane.getAttribute('data-medium-type');},_getTrackTypeFromTabPane:function(tabPane){__cov_rE9vzJ60_FO4xOugmxKTkg.f['37']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['144']++;return tabPane.getAttribute('data-track-kind');},_getMediaHTML:function(form){__cov_rE9vzJ60_FO4xOugmxKTkg.f['38']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['145']++;var mediumType=this._getMediumTypeFromTabPane(form.one('.root.tab-content > .tab-pane.active'));__cov_rE9vzJ60_FO4xOugmxKTkg.s['146']++;var tabContent=form.one(SELECTORS[mediumType.toUpperCase()+'_PANE']);__cov_rE9vzJ60_FO4xOugmxKTkg.s['147']++;return this['_getMediaHTML'+mediumType[0].toUpperCase()+mediumType.substr(1)](tabContent);},_getMediaHTMLLink:function(tab){__cov_rE9vzJ60_FO4xOugmxKTkg.f['39']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['148']++;var context={url:tab.one(SELECTORS.URL_INPUT).get('value'),name:(__cov_rE9vzJ60_FO4xOugmxKTkg.b['26'][0]++,tab.one(SELECTORS.NAME_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['26'][1]++,false)};__cov_rE9vzJ60_FO4xOugmxKTkg.s['149']++;return context.url?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['27'][0]++,Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.LINK)(context)):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['27'][1]++,'');},_getMediaHTMLVideo:function(tab){__cov_rE9vzJ60_FO4xOugmxKTkg.f['40']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['150']++;var context=this._getContextForMediaHTML(tab);__cov_rE9vzJ60_FO4xOugmxKTkg.s['151']++;context.width=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['28'][0]++,tab.one(SELECTORS.WIDTH_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['28'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['152']++;context.height=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['29'][0]++,tab.one(SELECTORS.HEIGHT_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['29'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['153']++;context.poster=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['30'][0]++,tab.one(SELECTORS.POSTER_SOURCE+' '+SELECTORS.URL_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['30'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['154']++;context.minute=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['31'][0]++,tab.one(SELECTORS.MINUTE_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['31'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['155']++;context.second=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['32'][0]++,tab.one(SELECTORS.SECOND_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['32'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['156']++;context.questions=(__cov_rE9vzJ60_FO4xOugmxKTkg.b['33'][0]++,tab.one(SELECTORS.QUESTIONS).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['33'][1]++,false);__cov_rE9vzJ60_FO4xOugmxKTkg.s['157']++;return context.sources.length?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['34'][0]++,Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.VIDEO)(context)):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['34'][1]++,'');},_getMediaHTMLAudio:function(tab){__cov_rE9vzJ60_FO4xOugmxKTkg.f['41']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['158']++;var context=this._getContextForMediaHTML(tab);__cov_rE9vzJ60_FO4xOugmxKTkg.s['159']++;return context.sources.length?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['35'][0]++,Y.Handlebars.compile(TEMPLATES.HTML_MEDIA.AUDIO)(context)):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['35'][1]++,'');},_getContextForMediaHTML:function(tab){__cov_rE9vzJ60_FO4xOugmxKTkg.f['42']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['160']++;var tracks=[];__cov_rE9vzJ60_FO4xOugmxKTkg.s['161']++;tab.all(SELECTORS.TRACK).each(function(track){__cov_rE9vzJ60_FO4xOugmxKTkg.f['43']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['162']++;tracks.push({track:track.one(SELECTORS.TRACK_SOURCE+' '+SELECTORS.URL_INPUT).get('value'),kind:this._getTrackTypeFromTabPane(track.ancestor('.tab-pane')),label:(__cov_rE9vzJ60_FO4xOugmxKTkg.b['36'][0]++,track.one(SELECTORS.TRACK_LABEL_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['36'][1]++,track.one(SELECTORS.TRACK_LANG_INPUT).get('value')),srclang:track.one(SELECTORS.TRACK_LANG_INPUT).get('value'),defaultTrack:track.one(SELECTORS.TRACK_DEFAULT_SELECT).get('checked')?(__cov_rE9vzJ60_FO4xOugmxKTkg.b['37'][0]++,'true'):(__cov_rE9vzJ60_FO4xOugmxKTkg.b['37'][1]++,null)});},this);__cov_rE9vzJ60_FO4xOugmxKTkg.s['163']++;return{sources:tab.all(SELECTORS.MEDIA_SOURCE+' '+SELECTORS.URL_INPUT).get('value').filter(function(source){__cov_rE9vzJ60_FO4xOugmxKTkg.f['44']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['164']++;return!!source;}).map(function(source){__cov_rE9vzJ60_FO4xOugmxKTkg.f['45']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['165']++;return{source:source};}),description:(__cov_rE9vzJ60_FO4xOugmxKTkg.b['38'][0]++,tab.one(SELECTORS.MEDIA_SOURCE+' '+SELECTORS.URL_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['38'][1]++,false),tracks:tracks.filter(function(track){__cov_rE9vzJ60_FO4xOugmxKTkg.f['46']++;__cov_rE9vzJ60_FO4xOugmxKTkg.s['166']++;return!!track.track;}),showControls:tab.one(SELECTORS.MEDIA_CONTROLS_TOGGLE).get('checked'),autoplay:tab.one(SELECTORS.MEDIA_AUTOPLAY_TOGGLE).get('checked'),muted:tab.one(SELECTORS.MEDIA_MUTE_TOGGLE).get('checked'),loop:tab.one(SELECTORS.MEDIA_LOOP_TOGGLE).get('checked'),title:(__cov_rE9vzJ60_FO4xOugmxKTkg.b['39'][0]++,tab.one(SELECTORS.TITLE_INPUT).get('value'))||(__cov_rE9vzJ60_FO4xOugmxKTkg.b['39'][1]++,false)};}},{ATTRS:{langs:{},help:{}}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin','moodle-form-shortforms']});
